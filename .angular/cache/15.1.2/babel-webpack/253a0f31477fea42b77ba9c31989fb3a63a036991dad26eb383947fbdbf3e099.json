{"ast":null,"code":"import { PLATFORM_ID } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { Subject, interval } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport * as dayjs from 'dayjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@ionic/angular\";\nfunction CountdownTimerComponent_ion_col_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-col\", 2)(1, \"span\", 3);\n    i0.ɵɵtext(2, \"D\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 4)(4, \"span\", 5);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0._daysLeft);\n  }\n}\nfunction CountdownTimerComponent_ion_col_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-col\", 2)(1, \"span\", 3);\n    i0.ɵɵtext(2, \"H\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 4)(4, \"span\", 5);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1._hoursLeft);\n  }\n}\nfunction CountdownTimerComponent_ion_col_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-col\", 2)(1, \"span\", 3);\n    i0.ɵɵtext(2, \"M\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 4)(4, \"span\", 5);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r2._minutesLeft);\n  }\n}\nfunction CountdownTimerComponent_ion_col_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-col\", 2)(1, \"span\", 3);\n    i0.ɵɵtext(2, \"S\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 4)(4, \"span\", 5);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r3._secondsLeft);\n  }\n}\nexport class CountdownTimerComponent {\n  constructor(platformId) {\n    this.platformId = platformId;\n    this._initialUnit = 'hour';\n    this._endingUnit = 'second';\n    this._updateInterval = interval(1000);\n    this._unsubscribeSubject = new Subject();\n    // DIVISORS\n    // 60 seconds * 60 (minutes) * 24 (hours) = 86400 seconds = 1 day\n    this._dayDivisor = 60 * 60 * 24;\n    // 60 seconds * 60 (minutes) = 3600 seconds = 1 hour\n    this._hourDivisor = 60 * 60;\n    // 60 seconds = 1 minute\n    this._minuteDivisor = 60;\n    this._secondDivisor = 1;\n    // MODULUS\n    // Neutral modulus\n    this._dayModulus = secondsLeft => secondsLeft;\n    // The modulus operator (%) returns the division remainder.\n    // To figure out how many hours are left after taking in consideration the days, we should do:\n    //    (secondsLeft % hourModulus) / hourDivisor\n    // In 1 day there are 86400 seconds, and in 1 hour 3600 seconds. 1 day + 1 hour = 90000 seconds\n    //    (90000s % 86400s) / 3600s = 1h\n    this._hourModulus = secondsLeft => secondsLeft % this._dayDivisor;\n    this._minuteModulus = secondsLeft => secondsLeft % this._hourDivisor;\n    this._secondModulus = secondsLeft => secondsLeft % this._minuteDivisor;\n  }\n  set end(endingTime) {\n    this._endingTime = endingTime !== undefined && endingTime !== null ? dayjs(endingTime) : dayjs();\n  }\n  set units(units) {\n    // 'day', 'hour, 'minute', 'second'\n    this._initialUnit = units !== undefined && units.from !== undefined && units.from !== null ? units.from : 'hour';\n    this._endingUnit = units !== undefined && units.to !== undefined && units.to !== null ? units.to : 'second';\n    // For 'day' unit, use the default modulus\n    // Adjust modulus depending on the unit\n    if (this._initialUnit === 'hour') {\n      // Cancelation modulus\n      this._dayModulus = secondsLeft => 1;\n      // Neutral modulus\n      this._hourModulus = secondsLeft => secondsLeft;\n    }\n    if (this._initialUnit === 'minute') {\n      // Cancelation modulus\n      this._dayModulus = secondsLeft => 1;\n      this._hourModulus = secondsLeft => 1;\n      // Neutral modulus\n      this._minuteModulus = secondsLeft => secondsLeft;\n    }\n    if (this._initialUnit === 'second') {\n      // Cancelation modulus\n      this._dayModulus = secondsLeft => 1;\n      this._hourModulus = secondsLeft => 1;\n      this._minuteModulus = secondsLeft => 1;\n      // Neutral modulus\n      this._secondModulus = secondsLeft => secondsLeft;\n    }\n  }\n  ngOnInit() {\n    // I believe if we run this on SSR, it won't ever trigger the change detection and thus the server will be stuck loading\n    if (isPlatformBrowser(this.platformId)) {\n      this._updateInterval.pipe(takeUntil(this._unsubscribeSubject)).subscribe({\n        next: val => {\n          this.updateValues();\n        },\n        error: error => console.error(error),\n        complete: () => console.log('[takeUntil] complete')\n      });\n    } else {\n      this.updateValues();\n    }\n  }\n  ngOnDestroy() {\n    this._unsubscribeSubject.next();\n    this._unsubscribeSubject.complete();\n  }\n  updateValues() {\n    const secondsLeft = this._endingTime.diff(dayjs(), 'second');\n    this._daysLeft = Math.floor(this._dayModulus(secondsLeft) / this._dayDivisor);\n    this._hoursLeft = Math.floor(this._hourModulus(secondsLeft) / this._hourDivisor);\n    this._minutesLeft = Math.floor(this._minuteModulus(secondsLeft) / this._minuteDivisor);\n    this._secondsLeft = Math.floor(this._secondModulus(secondsLeft) / this._secondDivisor);\n  }\n}\nCountdownTimerComponent.ɵfac = function CountdownTimerComponent_Factory(t) {\n  return new (t || CountdownTimerComponent)(i0.ɵɵdirectiveInject(PLATFORM_ID));\n};\nCountdownTimerComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CountdownTimerComponent,\n  selectors: [[\"app-countdown-timer\"]],\n  inputs: {\n    end: \"end\",\n    units: \"units\"\n  },\n  decls: 5,\n  vars: 4,\n  consts: [[1, \"countdown\"], [\"class\", \"time\", 4, \"ngIf\"], [1, \"time\"], [1, \"time-unit\"], [1, \"inner-time\"], [1, \"time-value\"]],\n  template: function CountdownTimerComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-row\", 0);\n      i0.ɵɵtemplate(1, CountdownTimerComponent_ion_col_1_Template, 6, 1, \"ion-col\", 1);\n      i0.ɵɵtemplate(2, CountdownTimerComponent_ion_col_2_Template, 6, 1, \"ion-col\", 1);\n      i0.ɵɵtemplate(3, CountdownTimerComponent_ion_col_3_Template, 6, 1, \"ion-col\", 1);\n      i0.ɵɵtemplate(4, CountdownTimerComponent_ion_col_4_Template, 6, 1, \"ion-col\", 1);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx._initialUnit === \"day\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx._initialUnit === \"day\" && ctx._endingUnit !== \"day\" || ctx._initialUnit === \"hour\" || ctx._endingUnit === \"hour\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx._initialUnit === \"day\" && ctx._endingUnit !== \"day\" && ctx._endingUnit !== \"hour\" || ctx._initialUnit === \"hour\" && ctx._endingUnit !== \"hour\" || ctx._initialUnit === \"minute\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx._endingUnit === \"second\");\n    }\n  },\n  dependencies: [i1.NgIf, i2.IonCol, i2.IonRow],\n  styles: [\"[_nghost-%COMP%] {\\n  --countdown-margin: 0px;\\n  --countdown-padding: 0px;\\n  --countdown-time-margin: 0px;\\n  --countdown-time-padding: 0px;\\n  --countdown-inner-time-margin: 2px;\\n  --countdown-inner-time-padding: 0px;\\n  --countdown-fill-border: none;\\n  --countdown-fill-border-radius: 0px;\\n  --countdown-fill-background: transparent;\\n  --countdown-fill-shadow: none;\\n  --countdown-value-color: #CCC;\\n  --countdown-unit-color: #CCC;\\n  --countdown-time-flex-direction: row-reverse;\\n  display: block;\\n}\\n[_nghost-%COMP%]   .countdown[_ngcontent-%COMP%] {\\n  margin: var(--countdown-margin);\\n  padding: var(--countdown-padding);\\n  justify-content: center;\\n  flex-wrap: nowrap;\\n}\\n[_nghost-%COMP%]   .time[_ngcontent-%COMP%] {\\n  padding: var(--countdown-time-padding);\\n  margin: var(--countdown-time-margin);\\n  display: flex;\\n  flex-direction: var(--countdown-time-flex-direction);\\n  align-items: center;\\n  justify-content: center;\\n}\\n[_nghost-%COMP%]   .time[_ngcontent-%COMP%]   .time-unit[_ngcontent-%COMP%] {\\n  display: block;\\n  color: var(--countdown-unit-color);\\n  font-size: 0.7em;\\n  text-align: center;\\n  text-transform: uppercase;\\n  width: 2ex;\\n}\\n[_nghost-%COMP%]   .time[_ngcontent-%COMP%]   .time-value[_ngcontent-%COMP%] {\\n  display: block;\\n  color: var(--countdown-value-color);\\n  text-align: center;\\n  font-size: 1em;\\n  line-height: 1em;\\n  min-height: 1em;\\n  min-width: 2.2ex;\\n  min-width: 2.1ch;\\n}\\n[_nghost-%COMP%]   .inner-time[_ngcontent-%COMP%] {\\n  margin: var(--countdown-inner-time-margin);\\n  padding: var(--countdown-inner-time-padding);\\n}\\n\\n[fill=countdown][_nghost-%COMP%]   .countdown[_ngcontent-%COMP%] {\\n  border: var(--countdown-fill-border);\\n  border-radius: var(--countdown-fill-border-radius);\\n  background-color: var(--countdown-fill-background);\\n  box-shadow: var(--countdown-fill-shadow);\\n}\\n\\n[fill=time][_nghost-%COMP%]   .time[_ngcontent-%COMP%] {\\n  border: var(--countdown-fill-border);\\n  border-radius: var(--countdown-fill-border-radius);\\n  background-color: var(--countdown-fill-background);\\n  box-shadow: var(--countdown-fill-shadow);\\n}\\n\\n[fill=inner-time][_nghost-%COMP%]   .inner-time[_ngcontent-%COMP%] {\\n  border: var(--countdown-fill-border);\\n  border-radius: var(--countdown-fill-border-radius);\\n  background-color: var(--countdown-fill-background);\\n  box-shadow: var(--countdown-fill-shadow);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9jb3VudGRvd24tdGltZXIvY291bnRkb3duLXRpbWVyLmNvbXBvbmVudC5zY3NzIiwid2VicGFjazovLy4vLi4vVGl0YW4lMjBFc3RhdGVzL3NyYy9hcHAvY29tcG9uZW50cy9jb3VudGRvd24tdGltZXIvY291bnRkb3duLXRpbWVyLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQU9BO0VBQ0UsdUJBQUE7RUFDQSx3QkFBQTtFQUNBLDRCQUFBO0VBQ0EsNkJBQUE7RUFDQSxrQ0FBQTtFQUNBLG1DQUFBO0VBRUEsNkJBQUE7RUFDQSxtQ0FBQTtFQUNBLHdDQUFBO0VBQ0EsNkJBQUE7RUFFQSw2QkFBQTtFQUNBLDRCQUFBO0VBRUEsNENBQUE7RUFFQSxjQUFBO0FDVkY7QURZRTtFQUNFLCtCQUFBO0VBQ0EsaUNBQUE7RUFFQSx1QkFBQTtFQUNBLGlCQUFBO0FDWEo7QURjRTtFQUNFLHNDQUFBO0VBQ0Esb0NBQUE7RUFFQSxhQUFBO0VBQ0Esb0RBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0FDYko7QURlSTtFQUNFLGNBQUE7RUFDQSxrQ0FBQTtFQUNBLGdCQUFBO0VBQ0Esa0JBQUE7RUFDQSx5QkFBQTtFQUNBLFVBQUE7QUNiTjtBRGdCSTtFQUNFLGNBQUE7RUFDQSxtQ0FBQTtFQUNBLGtCQUFBO0VBQ0EsY0FBQTtFQUNBLGdCQUFBO0VBQ0EsZUFBQTtFQUtBLGdCQUFBO0VBQ0EsZ0JBQUE7QUNsQk47QURzQkU7RUFDRSwwQ0FBQTtFQUNBLDRDQUFBO0FDcEJKOztBRHlCRTtFQTNFQSxvQ0FBQTtFQUNBLGtEQUFBO0VBQ0Esa0RBQUE7RUFDQSx3Q0FBQTtBQ3NERjs7QUR3QkU7RUFqRkEsb0NBQUE7RUFDQSxrREFBQTtFQUNBLGtEQUFBO0VBQ0Esd0NBQUE7QUM2REY7O0FEdUJFO0VBdkZBLG9DQUFBO0VBQ0Esa0RBQUE7RUFDQSxrREFBQTtFQUNBLHdDQUFBO0FDb0VGIiwic291cmNlc0NvbnRlbnQiOlsiQG1peGluIGZpbGwtY29udGFpbmVyKCl7XG4gIGJvcmRlcjogdmFyKC0tY291bnRkb3duLWZpbGwtYm9yZGVyKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tY291bnRkb3duLWZpbGwtYm9yZGVyLXJhZGl1cyk7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvdW50ZG93bi1maWxsLWJhY2tncm91bmQpO1xuICBib3gtc2hhZG93OiB2YXIoLS1jb3VudGRvd24tZmlsbC1zaGFkb3cpO1xufVxuXG46aG9zdCB7XG4gIC0tY291bnRkb3duLW1hcmdpbjogMHB4O1xuICAtLWNvdW50ZG93bi1wYWRkaW5nOiAwcHg7XG4gIC0tY291bnRkb3duLXRpbWUtbWFyZ2luOiAwcHg7XG4gIC0tY291bnRkb3duLXRpbWUtcGFkZGluZzogMHB4O1xuICAtLWNvdW50ZG93bi1pbm5lci10aW1lLW1hcmdpbjogMnB4O1xuICAtLWNvdW50ZG93bi1pbm5lci10aW1lLXBhZGRpbmc6IDBweDtcblxuICAtLWNvdW50ZG93bi1maWxsLWJvcmRlcjogbm9uZTtcbiAgLS1jb3VudGRvd24tZmlsbC1ib3JkZXItcmFkaXVzOiAwcHg7XG4gIC0tY291bnRkb3duLWZpbGwtYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIC0tY291bnRkb3duLWZpbGwtc2hhZG93OiBub25lO1xuXG4gIC0tY291bnRkb3duLXZhbHVlLWNvbG9yOiAjQ0NDO1xuICAtLWNvdW50ZG93bi11bml0LWNvbG9yOiAjQ0NDO1xuXG4gIC0tY291bnRkb3duLXRpbWUtZmxleC1kaXJlY3Rpb246IHJvdy1yZXZlcnNlO1xuXG4gIGRpc3BsYXk6IGJsb2NrO1xuXG4gIC5jb3VudGRvd24ge1xuICAgIG1hcmdpbjogdmFyKC0tY291bnRkb3duLW1hcmdpbik7XG4gICAgcGFkZGluZzogdmFyKC0tY291bnRkb3duLXBhZGRpbmcpO1xuXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgZmxleC13cmFwOiBub3dyYXA7XG4gIH1cblxuICAudGltZSB7XG4gICAgcGFkZGluZzogdmFyKC0tY291bnRkb3duLXRpbWUtcGFkZGluZyk7XG4gICAgbWFyZ2luOiB2YXIoLS1jb3VudGRvd24tdGltZS1tYXJnaW4pO1xuXG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogdmFyKC0tY291bnRkb3duLXRpbWUtZmxleC1kaXJlY3Rpb24pO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG5cbiAgICAudGltZS11bml0IHtcbiAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgY29sb3I6IHZhcigtLWNvdW50ZG93bi11bml0LWNvbG9yKTtcbiAgICAgIGZvbnQtc2l6ZTogMC43ZW07XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICAgICAgd2lkdGg6IDJleDtcbiAgICB9XG5cbiAgICAudGltZS12YWx1ZSB7XG4gICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIGNvbG9yOiB2YXIoLS1jb3VudGRvd24tdmFsdWUtY29sb3IpO1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgZm9udC1zaXplOiAxZW07XG4gICAgICBsaW5lLWhlaWdodDogMWVtO1xuICAgICAgbWluLWhlaWdodDogMWVtO1xuXG4gICAgICAvLyBNYWtlIHN1cmUgd2UgYWx3YXlzIGhhdmUgc3BhY2UgZm9yIHR3byBjaGFyYWN0ZXJzXG4gICAgICAvLyBBcyBjaCAod2lkdGggb2YgdGhlIGNoYXJhY3RlciAnMCcpIHVuaXQgaXMgbm90IDEwMCUgc3VwcG9ydGVkLCB3ZSB3aWxsIHVzZSBleCAoaGVpZ2h0IG9mIHRoZSAneCcgY2hhcmFjdGVyKSBhcyBhIGZhbGxiYWNrXG4gICAgICAvLyBTZWU6IGh0dHBzOi8vd3d3LnF1aXJrc21vZGUub3JnL2Nzcy91bml0cy12YWx1ZXMvXG4gICAgICBtaW4td2lkdGg6IDIuMmV4OyAvLyBUaGUgJ3gnIGNoYXJhY3RlciBpcyBzZW1pLXNxdWFyZSBjaGFyLCB0aGF0J3Mgd2h5IHdlIHNldCAyLjJleFxuICAgICAgbWluLXdpZHRoOiAyLjFjaDsgLy8gY2ggaXMgdGhlIG9ubHkgZm9udCB1bml0IGJhc2VkIG9uIHRoZSB3aWR0aCBvZiBjaGFyYWN0ZXJzXG4gICAgfVxuICB9XG5cbiAgLmlubmVyLXRpbWUge1xuICAgIG1hcmdpbjogdmFyKC0tY291bnRkb3duLWlubmVyLXRpbWUtbWFyZ2luKTtcbiAgICBwYWRkaW5nOiB2YXIoLS1jb3VudGRvd24taW5uZXItdGltZS1wYWRkaW5nKTtcbiAgfVxufVxuXG46aG9zdChbZmlsbD1cImNvdW50ZG93blwiXSkge1xuICAuY291bnRkb3duIHtcbiAgICBAaW5jbHVkZSBmaWxsLWNvbnRhaW5lcigpO1xuICB9XG59XG5cbjpob3N0KFtmaWxsPVwidGltZVwiXSkge1xuICAudGltZSB7XG4gICAgQGluY2x1ZGUgZmlsbC1jb250YWluZXIoKTtcbiAgfVxufVxuXG46aG9zdChbZmlsbD1cImlubmVyLXRpbWVcIl0pIHtcbiAgLmlubmVyLXRpbWUge1xuICAgIEBpbmNsdWRlIGZpbGwtY29udGFpbmVyKCk7XG4gIH1cbn1cbiIsIjpob3N0IHtcbiAgLS1jb3VudGRvd24tbWFyZ2luOiAwcHg7XG4gIC0tY291bnRkb3duLXBhZGRpbmc6IDBweDtcbiAgLS1jb3VudGRvd24tdGltZS1tYXJnaW46IDBweDtcbiAgLS1jb3VudGRvd24tdGltZS1wYWRkaW5nOiAwcHg7XG4gIC0tY291bnRkb3duLWlubmVyLXRpbWUtbWFyZ2luOiAycHg7XG4gIC0tY291bnRkb3duLWlubmVyLXRpbWUtcGFkZGluZzogMHB4O1xuICAtLWNvdW50ZG93bi1maWxsLWJvcmRlcjogbm9uZTtcbiAgLS1jb3VudGRvd24tZmlsbC1ib3JkZXItcmFkaXVzOiAwcHg7XG4gIC0tY291bnRkb3duLWZpbGwtYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIC0tY291bnRkb3duLWZpbGwtc2hhZG93OiBub25lO1xuICAtLWNvdW50ZG93bi12YWx1ZS1jb2xvcjogI0NDQztcbiAgLS1jb3VudGRvd24tdW5pdC1jb2xvcjogI0NDQztcbiAgLS1jb3VudGRvd24tdGltZS1mbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7XG4gIGRpc3BsYXk6IGJsb2NrO1xufVxuOmhvc3QgLmNvdW50ZG93biB7XG4gIG1hcmdpbjogdmFyKC0tY291bnRkb3duLW1hcmdpbik7XG4gIHBhZGRpbmc6IHZhcigtLWNvdW50ZG93bi1wYWRkaW5nKTtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGZsZXgtd3JhcDogbm93cmFwO1xufVxuOmhvc3QgLnRpbWUge1xuICBwYWRkaW5nOiB2YXIoLS1jb3VudGRvd24tdGltZS1wYWRkaW5nKTtcbiAgbWFyZ2luOiB2YXIoLS1jb3VudGRvd24tdGltZS1tYXJnaW4pO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogdmFyKC0tY291bnRkb3duLXRpbWUtZmxleC1kaXJlY3Rpb24pO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbn1cbjpob3N0IC50aW1lIC50aW1lLXVuaXQge1xuICBkaXNwbGF5OiBibG9jaztcbiAgY29sb3I6IHZhcigtLWNvdW50ZG93bi11bml0LWNvbG9yKTtcbiAgZm9udC1zaXplOiAwLjdlbTtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICB3aWR0aDogMmV4O1xufVxuOmhvc3QgLnRpbWUgLnRpbWUtdmFsdWUge1xuICBkaXNwbGF5OiBibG9jaztcbiAgY29sb3I6IHZhcigtLWNvdW50ZG93bi12YWx1ZS1jb2xvcik7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgZm9udC1zaXplOiAxZW07XG4gIGxpbmUtaGVpZ2h0OiAxZW07XG4gIG1pbi1oZWlnaHQ6IDFlbTtcbiAgbWluLXdpZHRoOiAyLjJleDtcbiAgbWluLXdpZHRoOiAyLjFjaDtcbn1cbjpob3N0IC5pbm5lci10aW1lIHtcbiAgbWFyZ2luOiB2YXIoLS1jb3VudGRvd24taW5uZXItdGltZS1tYXJnaW4pO1xuICBwYWRkaW5nOiB2YXIoLS1jb3VudGRvd24taW5uZXItdGltZS1wYWRkaW5nKTtcbn1cblxuOmhvc3QoW2ZpbGw9Y291bnRkb3duXSkgLmNvdW50ZG93biB7XG4gIGJvcmRlcjogdmFyKC0tY291bnRkb3duLWZpbGwtYm9yZGVyKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tY291bnRkb3duLWZpbGwtYm9yZGVyLXJhZGl1cyk7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvdW50ZG93bi1maWxsLWJhY2tncm91bmQpO1xuICBib3gtc2hhZG93OiB2YXIoLS1jb3VudGRvd24tZmlsbC1zaGFkb3cpO1xufVxuXG46aG9zdChbZmlsbD10aW1lXSkgLnRpbWUge1xuICBib3JkZXI6IHZhcigtLWNvdW50ZG93bi1maWxsLWJvcmRlcik7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLWNvdW50ZG93bi1maWxsLWJvcmRlci1yYWRpdXMpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb3VudGRvd24tZmlsbC1iYWNrZ3JvdW5kKTtcbiAgYm94LXNoYWRvdzogdmFyKC0tY291bnRkb3duLWZpbGwtc2hhZG93KTtcbn1cblxuOmhvc3QoW2ZpbGw9aW5uZXItdGltZV0pIC5pbm5lci10aW1lIHtcbiAgYm9yZGVyOiB2YXIoLS1jb3VudGRvd24tZmlsbC1ib3JkZXIpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1jb3VudGRvd24tZmlsbC1ib3JkZXItcmFkaXVzKTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY291bnRkb3duLWZpbGwtYmFja2dyb3VuZCk7XG4gIGJveC1zaGFkb3c6IHZhcigtLWNvdW50ZG93bi1maWxsLXNoYWRvdyk7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["PLATFORM_ID","isPlatformBrowser","Subject","interval","takeUntil","dayjs","i0","CountdownTimerComponent","constructor","platformId","secondsLeft","_dayDivisor","_hourDivisor","_minuteDivisor","end","endingTime","_endingTime","undefined","units","_initialUnit","from","_endingUnit","to","_dayModulus","_hourModulus","_minuteModulus","_secondModulus","ngOnInit","_updateInterval","pipe","_unsubscribeSubject","subscribe","next","val","updateValues","error","console","complete","log","ngOnDestroy","diff","_daysLeft","Math","floor","_hoursLeft","_minutesLeft","_secondsLeft","_secondDivisor","selectors","inputs","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/teeicloud/TitanEstates/Titan Estates/src/app/components/countdown-timer/countdown-timer.component.ts","/Users/teeicloud/TitanEstates/Titan Estates/src/app/components/countdown-timer/countdown-timer.component.html"],"sourcesContent":["import { Component, Input, OnInit, OnDestroy, Inject, PLATFORM_ID } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\n\nimport { Observable, Subject, interval } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nimport * as dayjs from 'dayjs';\n\n@Component({\n  selector: 'app-countdown-timer',\n  templateUrl: './countdown-timer.component.html',\n  styleUrls: [\n    './countdown-timer.component.scss'\n  ]\n})\nexport class CountdownTimerComponent implements OnInit, OnDestroy {\n  _endingTime: any;\n  _initialUnit = 'hour';\n  _endingUnit = 'second';\n\n  _updateInterval: Observable<any> = interval(1000);\n  private _unsubscribeSubject: Subject<void> = new Subject();\n\n  _daysLeft: number;\n  _hoursLeft: number;\n  _minutesLeft: number;\n  _secondsLeft: number;\n\n  // DIVISORS\n  // 60 seconds * 60 (minutes) * 24 (hours) = 86400 seconds = 1 day\n  _dayDivisor = (60 * 60 * 24);\n  // 60 seconds * 60 (minutes) = 3600 seconds = 1 hour\n  _hourDivisor = (60 * 60);\n  // 60 seconds = 1 minute\n  _minuteDivisor = 60;\n  _secondDivisor = 1;\n\n  // MODULUS\n  // Neutral modulus\n  _dayModulus = (secondsLeft) => secondsLeft;\n  // The modulus operator (%) returns the division remainder.\n  // To figure out how many hours are left after taking in consideration the days, we should do:\n  //    (secondsLeft % hourModulus) / hourDivisor\n  // In 1 day there are 86400 seconds, and in 1 hour 3600 seconds. 1 day + 1 hour = 90000 seconds\n  //    (90000s % 86400s) / 3600s = 1h\n  _hourModulus = (secondsLeft) => (secondsLeft % this._dayDivisor);\n  _minuteModulus = (secondsLeft) => (secondsLeft % this._hourDivisor);\n  _secondModulus = (secondsLeft) => (secondsLeft % this._minuteDivisor);\n\n  @Input()\n  set end(endingTime: string) {\n    this._endingTime = (endingTime !== undefined && endingTime !== null) ? dayjs(endingTime) : dayjs();\n  }\n\n  @Input()\n  set units(units: {from: string, to: string}) {\n    // 'day', 'hour, 'minute', 'second'\n    this._initialUnit = (units !== undefined && (units.from !== undefined && units.from !== null)) ? units.from : 'hour';\n    this._endingUnit = (units !== undefined && (units.to !== undefined && units.to !== null)) ? units.to : 'second';\n\n    // For 'day' unit, use the default modulus\n\n    // Adjust modulus depending on the unit\n    if (this._initialUnit === 'hour') {\n      // Cancelation modulus\n      this._dayModulus = (secondsLeft) => 1;\n      // Neutral modulus\n      this._hourModulus = (secondsLeft) => secondsLeft;\n    }\n\n    if (this._initialUnit === 'minute') {\n      // Cancelation modulus\n      this._dayModulus = (secondsLeft) => 1;\n      this._hourModulus = (secondsLeft) => 1;\n      // Neutral modulus\n      this._minuteModulus = (secondsLeft) => secondsLeft;\n    }\n\n    if (this._initialUnit === 'second') {\n      // Cancelation modulus\n      this._dayModulus = (secondsLeft) => 1;\n      this._hourModulus = (secondsLeft) => 1;\n      this._minuteModulus = (secondsLeft) => 1;\n      // Neutral modulus\n      this._secondModulus = (secondsLeft) => secondsLeft;\n    }\n  }\n\n  constructor(\n    @Inject(PLATFORM_ID) private platformId: object\n  ) { }\n\n  ngOnInit(): void {\n    // I believe if we run this on SSR, it won't ever trigger the change detection and thus the server will be stuck loading\n    if (isPlatformBrowser(this.platformId)) {\n      this._updateInterval.pipe(takeUntil(this._unsubscribeSubject))\n      .subscribe({\n        next: (val) => {\n          this.updateValues();\n        },\n        error: (error) => console.error(error),\n        complete: () => console.log('[takeUntil] complete')\n      });\n    } else {\n      this.updateValues();\n    }\n  }\n\n  ngOnDestroy(): void {\n    this._unsubscribeSubject.next();\n    this._unsubscribeSubject.complete();\n  }\n\n  updateValues(): void {\n    const secondsLeft = this._endingTime.diff(dayjs(), 'second');\n\n    this._daysLeft = Math.floor(this._dayModulus(secondsLeft) / this._dayDivisor);\n    this._hoursLeft = Math.floor(this._hourModulus(secondsLeft) / this._hourDivisor);\n    this._minutesLeft = Math.floor(this._minuteModulus(secondsLeft) / this._minuteDivisor);\n    this._secondsLeft = Math.floor(this._secondModulus(secondsLeft) / this._secondDivisor);\n  }\n}\n","<ion-row class=\"countdown\">\n  <ion-col class=\"time\" *ngIf=\"_initialUnit === 'day'\">\n    <span class=\"time-unit\">D</span>\n    <div class=\"inner-time\">\n      <span class=\"time-value\">{{ _daysLeft }}</span>\n    </div>\n  </ion-col>\n  <ion-col class=\"time\" *ngIf=\"(_initialUnit === 'day' && _endingUnit !== 'day') || _initialUnit === 'hour' || _endingUnit === 'hour'\">\n    <span class=\"time-unit\">H</span>\n    <div class=\"inner-time\">\n      <span class=\"time-value\">{{ _hoursLeft }}</span>\n    </div>\n  </ion-col>\n  <ion-col class=\"time\" *ngIf=\"(_initialUnit === 'day' && (_endingUnit !== 'day' && _endingUnit !== 'hour')) || (_initialUnit === 'hour' && _endingUnit !== 'hour') || _initialUnit === 'minute'\">\n    <span class=\"time-unit\">M</span>\n    <div class=\"inner-time\">\n      <span class=\"time-value\">{{ _minutesLeft }}</span>\n    </div>\n  </ion-col>\n  <ion-col class=\"time\" *ngIf=\"_endingUnit === 'second'\">\n    <span class=\"time-unit\">S</span>\n    <div class=\"inner-time\">\n      <span class=\"time-value\">{{ _secondsLeft }}</span>\n    </div>\n  </ion-col>\n</ion-row>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}