{"ast":null,"code":"import { ModalController } from '@ionic/angular';\nimport { FirebaseCrudService } from '../../firebase-crud.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"../../firebase-crud.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../../../../shell/aspect-ratio/aspect-ratio.component\";\nimport * as i5 from \"../../../../shell/image-shell/image-shell.component\";\nconst _c0 = function () {\n  return {\n    w: 1,\n    h: 1\n  };\n};\nfunction SelectUserImageModalComponent_ion_col_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-col\", 7)(1, \"app-image-shell\", 8);\n    i0.ɵɵlistener(\"click\", function SelectUserImageModalComponent_ion_col_9_Template_app_image_shell_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const avatar_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.dismissModal(avatar_r1));\n    });\n    i0.ɵɵelement(2, \"app-aspect-ratio\", 9);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const avatar_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"display\", \"cover\")(\"src\", avatar_r1.link)(\"alt\", \"avatar image\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ratio\", i0.ɵɵpureFunction0(4, _c0));\n  }\n}\nexport class SelectUserImageModalComponent {\n  constructor(modalController, firebaseCrudService) {\n    this.modalController = modalController;\n    this.firebaseCrudService = firebaseCrudService;\n  }\n  get isShell() {\n    return this.avatars && this.avatars.isShell ? true : false;\n  }\n  ngOnInit() {\n    const dataSource = this.firebaseCrudService.getAvatarsDataSource();\n    const dataStore = this.firebaseCrudService.getAvatarsStore(dataSource);\n    dataStore.state.subscribe({\n      next: state => {\n        this.avatars = state;\n      },\n      error: error => console.log(error)\n    });\n  }\n  dismissModal(avatar) {\n    this.modalController.dismiss(avatar);\n  }\n}\nSelectUserImageModalComponent.ɵfac = function SelectUserImageModalComponent_Factory(t) {\n  return new (t || SelectUserImageModalComponent)(i0.ɵɵdirectiveInject(i1.ModalController), i0.ɵɵdirectiveInject(i2.FirebaseCrudService));\n};\nSelectUserImageModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SelectUserImageModalComponent,\n  selectors: [[\"app-select-user-image\"]],\n  hostVars: 2,\n  hostBindings: function SelectUserImageModalComponent_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      i0.ɵɵclassProp(\"is-shell\", ctx.isShell);\n    }\n  },\n  decls: 10,\n  vars: 1,\n  consts: [[\"color\", \"primary\"], [\"slot\", \"end\"], [3, \"click\"], [\"slot\", \"icon-only\", \"name\", \"close\"], [1, \"select-image-content\"], [1, \"images-wrapper\"], [\"size\", \"4\", \"class\", \"image-item\", 4, \"ngFor\", \"ngForOf\"], [\"size\", \"4\", 1, \"image-item\"], [\"animation\", \"spinner\", 1, \"user-image\", 3, \"display\", \"src\", \"alt\", \"click\"], [3, \"ratio\"]],\n  template: function SelectUserImageModalComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\", 0)(2, \"ion-buttons\", 1)(3, \"ion-button\", 2);\n      i0.ɵɵlistener(\"click\", function SelectUserImageModalComponent_Template_ion_button_click_3_listener() {\n        return ctx.dismissModal();\n      });\n      i0.ɵɵelement(4, \"ion-icon\", 3);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"ion-title\");\n      i0.ɵɵtext(6, \"Select an Avatar\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(7, \"ion-content\", 4)(8, \"ion-row\", 5);\n      i0.ɵɵtemplate(9, SelectUserImageModalComponent_ion_col_9_Template, 3, 5, \"ion-col\", 6);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngForOf\", ctx.avatars);\n    }\n  },\n  dependencies: [i1.IonButton, i1.IonButtons, i1.IonCol, i1.IonContent, i1.IonHeader, i1.IonIcon, i1.IonRow, i1.IonTitle, i1.IonToolbar, i3.NgForOf, i4.AspectRatioComponent, i5.ImageShellComponent],\n  styles: [\"[_nghost-%COMP%] {\\n  --page-margin: var(--app-fair-margin);\\n  --page-background: var(--app-background);\\n}\\n\\n.select-image-content[_ngcontent-%COMP%] {\\n  --background: var(--page-background);\\n}\\n.select-image-content[_ngcontent-%COMP%]   .images-wrapper[_ngcontent-%COMP%] {\\n  --ion-grid-column-padding: calc(var(--page-margin) / 2);\\n  padding: calc(var(--page-margin) / 2);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmlyZWJhc2UvY3J1ZC91c2VyL3NlbGVjdC1pbWFnZS9zdHlsZXMvc2VsZWN0LXVzZXItaW1hZ2UubW9kYWwuc2NzcyIsIndlYnBhY2s6Ly8uLy4uL1RpdGFuJTIwRXN0YXRlcy9zcmMvYXBwL2ZpcmViYXNlL2NydWQvdXNlci9zZWxlY3QtaW1hZ2Uvc3R5bGVzL3NlbGVjdC11c2VyLWltYWdlLm1vZGFsLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7RUFDRSxxQ0FBQTtFQUNBLHdDQUFBO0FDREY7O0FESUE7RUFDRSxvQ0FBQTtBQ0RGO0FER0U7RUFDRSx1REFBQTtFQUVBLHFDQUFBO0FDRkoiLCJzb3VyY2VzQ29udGVudCI6WyIvLyAvLyBDdXN0b20gdmFyaWFibGVzXG4vLyAvLyBOb3RlOiAgVGhlc2Ugb25lcyB3ZXJlIGFkZGVkIGJ5IHVzIGFuZCBoYXZlIG5vdGhpbmcgdG8gZG8gd2l0aCBJb25pYyBDU1MgQ3VzdG9tIFByb3BlcnRpZXNcbjpob3N0IHtcbiAgLS1wYWdlLW1hcmdpbjogdmFyKC0tYXBwLWZhaXItbWFyZ2luKTtcbiAgLS1wYWdlLWJhY2tncm91bmQ6IHZhcigtLWFwcC1iYWNrZ3JvdW5kKTtcbn1cblxuLnNlbGVjdC1pbWFnZS1jb250ZW50IHtcbiAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1wYWdlLWJhY2tncm91bmQpO1xuXG4gIC5pbWFnZXMtd3JhcHBlciB7XG4gICAgLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZzogY2FsYyh2YXIoLS1wYWdlLW1hcmdpbikgLyAyKTtcblxuICAgIHBhZGRpbmc6IGNhbGModmFyKC0tcGFnZS1tYXJnaW4pIC8gMik7XG4gIH1cbn1cbiIsIjpob3N0IHtcbiAgLS1wYWdlLW1hcmdpbjogdmFyKC0tYXBwLWZhaXItbWFyZ2luKTtcbiAgLS1wYWdlLWJhY2tncm91bmQ6IHZhcigtLWFwcC1iYWNrZ3JvdW5kKTtcbn1cblxuLnNlbGVjdC1pbWFnZS1jb250ZW50IHtcbiAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1wYWdlLWJhY2tncm91bmQpO1xufVxuLnNlbGVjdC1pbWFnZS1jb250ZW50IC5pbWFnZXMtd3JhcHBlciB7XG4gIC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmc6IGNhbGModmFyKC0tcGFnZS1tYXJnaW4pIC8gMik7XG4gIHBhZGRpbmc6IGNhbGModmFyKC0tcGFnZS1tYXJnaW4pIC8gMik7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\", \"app-image-shell.user-image[_ngcontent-%COMP%] {\\n  --image-shell-border-radius: var(--app-fair-radius);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmlyZWJhc2UvY3J1ZC91c2VyL3NlbGVjdC1pbWFnZS9zdHlsZXMvc2VsZWN0LXVzZXItaW1hZ2Uuc2hlbGwuc2NzcyIsIndlYnBhY2s6Ly8uLy4uL1RpdGFuJTIwRXN0YXRlcy9zcmMvYXBwL2ZpcmViYXNlL2NydWQvdXNlci9zZWxlY3QtaW1hZ2Uvc3R5bGVzL3NlbGVjdC11c2VyLWltYWdlLnNoZWxsLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxtREFBQTtBQ0NGIiwic291cmNlc0NvbnRlbnQiOlsiYXBwLWltYWdlLXNoZWxsLnVzZXItaW1hZ2Uge1xuICAtLWltYWdlLXNoZWxsLWJvcmRlci1yYWRpdXM6IHZhcigtLWFwcC1mYWlyLXJhZGl1cyk7XG59XG4iLCJhcHAtaW1hZ2Utc2hlbGwudXNlci1pbWFnZSB7XG4gIC0taW1hZ2Utc2hlbGwtYm9yZGVyLXJhZGl1czogdmFyKC0tYXBwLWZhaXItcmFkaXVzKTtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"AACA,SAASA,eAAe,QAAQ,gBAAgB;AAIhD,SAASC,mBAAmB,QAAQ,6BAA6B;;;;;;;;;;;;;;;;ICQ7DC,kCAAoE;IACqDA;MAAA;MAAA;MAAA;MAAA,OAASA,6CAAoB;IAAA,EAAC;IACnJA,sCACmB;IACrBA,iBAAkB;;;;IAHDA,eAAmB;IAAnBA,iCAAmB;IAChBA,eAAsB;IAAtBA,kDAAsB;;;ADAhD,OAAM,MAAOC,6BAA6B;EASxCC,YACUC,eAAgC,EACjCC,mBAAwC;IADvC,oBAAe,GAAfD,eAAe;IAChB,wBAAmB,GAAnBC,mBAAmB;EACxB;EAPJ,IAAmCC,OAAO;IACxC,OAAQ,IAAI,CAACC,OAAO,IAAI,IAAI,CAACA,OAAO,CAACD,OAAO,GAAI,IAAI,GAAG,KAAK;EAC9D;EAOAE,QAAQ;IACN,MAAMC,UAAU,GAAG,IAAI,CAACJ,mBAAmB,CAACK,oBAAoB,EAAE;IAClE,MAAMC,SAAS,GAAG,IAAI,CAACN,mBAAmB,CAACO,eAAe,CAACH,UAAU,CAAC;IAEtEE,SAAS,CAACE,KAAK,CACdC,SAAS,CAAC;MACTC,IAAI,EAAGF,KAAK,IAAI;QACd,IAAI,CAACN,OAAO,GAAGM,KAAK;MACtB,CAAC;MACDG,KAAK,EAAGA,KAAK,IAAKC,OAAO,CAACC,GAAG,CAACF,KAAK;KACpC,CAAC;EACJ;EAEAG,YAAY,CAACC,MAAuB;IAClC,IAAI,CAAChB,eAAe,CAACiB,OAAO,CAACD,MAAM,CAAC;EACtC;;AA7BWlB,6BAA6B;mBAA7BA,6BAA6B;AAAA;AAA7BA,6BAA6B;QAA7BA,6BAA6B;EAAAoB;EAAAC;EAAAC;IAAA;;;;;;;;;MCf1CvB,kCAAY;MAGMA;QAAA,OAASwB,kBAAc;MAAA,EAAC;MAClCxB,8BAAmD;MACrDA,iBAAa;MAEfA,iCAAW;MAAAA,gCAAgB;MAAAA,iBAAY;MAI3CA,sCAA0C;MAEtCA,sFAKU;MACZA,iBAAU;;;MANgDA,eAAU;MAAVA,qCAAU","names":["ModalController","FirebaseCrudService","i0","SelectUserImageModalComponent","constructor","modalController","firebaseCrudService","isShell","avatars","ngOnInit","dataSource","getAvatarsDataSource","dataStore","getAvatarsStore","state","subscribe","next","error","console","log","dismissModal","avatar","dismiss","selectors","hostVars","hostBindings","ctx"],"sourceRoot":"","sources":["/Users/teeicloud/TitanEstates/Titan Estates/src/app/firebase/crud/user/select-image/select-user-image.modal.ts","/Users/teeicloud/TitanEstates/Titan Estates/src/app/firebase/crud/user/select-image/select-user-image.modal.html"],"sourcesContent":["import { Component, OnInit, HostBinding } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\n\nimport { UserImageModel } from './user-image.model';\nimport { ShellModel } from '../../../../shell/data-store';\nimport { FirebaseCrudService } from '../../firebase-crud.service';\n\n@Component({\n  selector: 'app-select-user-image',\n  templateUrl: './select-user-image.modal.html',\n  styleUrls: [\n    './styles/select-user-image.modal.scss',\n    './styles/select-user-image.shell.scss'\n  ]\n})\nexport class SelectUserImageModalComponent implements OnInit {\n  // Use Typescript intersection types to enable docorating the Array of firebase models with a shell model\n  // (ref: https://www.typescriptlang.org/docs/handbook/advanced-types.html#intersection-types)\n  avatars: Array<UserImageModel> & ShellModel;\n\n  @HostBinding('class.is-shell') get isShell() {\n    return (this.avatars && this.avatars.isShell) ? true : false;\n  }\n\n  constructor(\n    private modalController: ModalController,\n    public firebaseCrudService: FirebaseCrudService\n  ) { }\n\n  ngOnInit() {\n    const dataSource = this.firebaseCrudService.getAvatarsDataSource();\n    const dataStore = this.firebaseCrudService.getAvatarsStore(dataSource);\n\n    dataStore.state\n    .subscribe({\n      next: (state) => {\n        this.avatars = state;\n      },\n      error: (error) => console.log(error)\n    });\n  }\n\n  dismissModal(avatar?: UserImageModel) {\n    this.modalController.dismiss(avatar);\n  }\n}\n","<ion-header>\n  <ion-toolbar color=\"primary\">\n    <ion-buttons slot=\"end\">\n      <ion-button (click)=\"dismissModal()\">\n        <ion-icon slot=\"icon-only\" name=\"close\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n    <ion-title>Select an Avatar</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"select-image-content\">\n  <ion-row class=\"images-wrapper\">\n    <ion-col size=\"4\" class=\"image-item\" *ngFor=\"let avatar of avatars\">\n      <app-image-shell [display]=\"'cover'\" class=\"user-image\" animation=\"spinner\" [src]=\"avatar.link\" [alt]=\"'avatar image'\" (click)=\"dismissModal(avatar)\">\n        <app-aspect-ratio [ratio]=\"{w: 1, h: 1}\">\n        </app-aspect-ratio>\n      </app-image-shell>\n    </ion-col>\n  </ion-row>\n</ion-content>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}