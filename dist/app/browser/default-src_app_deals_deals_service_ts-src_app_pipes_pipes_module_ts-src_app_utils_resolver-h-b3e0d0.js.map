{"version":3,"file":"default-src_app_deals_deals_service_ts-src_app_pipes_pipes_module_ts-src_app_utils_resolver-h-b3e0d0.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAgE;AACd;AAGb;AAEN;AAEiB;AACkB;AACA;AACG;AAClB;;;;AAG7C,MAAOS,YAAY;EAIvBC,YAC+BC,UAAkB,EACvCC,mBAAwC,EACxCC,IAAgB;IAFK,KAAAF,UAAU,GAAVA,UAAU;IAC/B,KAAAC,mBAAmB,GAAnBA,mBAAmB;IACnB,KAAAC,IAAI,GAAJA,IAAI;EACV;EAEJ,IAAIC,aAAaA,CAAA;IACf,OAAO,CACLX,kCAAK,EAAE,CAACY,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAACA,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,CAACA,GAAG,CAAC,EAAE,EAAE,QAAQ,CAAC,CAACC,MAAM,CAAC,qBAAqB,CAAW,EAC9Fb,kCAAK,EAAE,CAACY,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAACC,MAAM,CAAC,YAAY,CAAW,EACpDb,kCAAK,EAAE,CAACc,QAAQ,CAAC,CAAC,EAAE,OAAO,CAAC,CAACD,MAAM,CAAC,YAAY,CAAW,EAC3Db,kCAAK,EAAE,CAACY,GAAG,CAAC,CAAC,EAAE,OAAO,CAAC,CAACC,MAAM,CAAC,YAAY,CAAW,CACvD;EACH;EAEOE,oBAAoBA,CAAA;IACzB,MAAMC,aAAa,GAAG,IAAI,CAACN,IAAI,CAACO,GAAG,CAAoB,yCAAyC,CAAC,CAChGC,IAAI,CACHnB,mDAAG,CACAoB,IAAuB,IAAI;MAC1B;MACA,MAAM;QAACC,KAAK;QAAE,GAAGC;MAAS,CAAC,GAAGF,IAAI;MAElC,MAAMG,sBAAsB,GAAGF,KAAK,CAACrB,GAAG,CAAC,CAACwB,QAAQ,EAAEC,KAAK,KAAI;QAC3D;QACA,OAAO;UAAC,GAAGD,QAAQ;UAAEE,cAAc,EAAE,IAAI,CAACd,aAAa,CAACa,KAAK;QAAC,CAAC;MACjE,CAAC,CAAC;MAEF;MACA,MAAME,kBAAkB,GAAG;QAAC,GAAGL,SAAS;QAAED,KAAK,EAAEE;MAAsB,CAAC;MAExE;MACA;MACA,MAAMK,OAAO,GAAG,IAAIzB,2EAAiB,EAAE;MAEvC;MACA;MACA;MACA0B,MAAM,CAACC,MAAM,CAACF,OAAO,EAAED,kBAAkB,CAAC;MAE1C,OAAOC,OAAO;IAChB,CAAC,CACF,CACF;IAED;IACA;IACA;IACA,MAAMG,gBAAgB,GAAG,IAAI,CAACrB,mBAAmB,CAACsB,oBAAoB,CAAC,qBAAqB,EAAEf,aAAa,CAAC;IAE5G,OAAOc,gBAAgB;EACzB;EAEOE,eAAeA,CAACC,UAAyC;IAC9D;IACA,IAAI,CAAC,IAAI,CAACC,gBAAgB,EAAE;MAC1B;MACA,MAAMC,UAAU,GAAsB,IAAIjC,2EAAiB,EAAE;MAC7D,IAAI,CAACgC,gBAAgB,GAAG,IAAIjC,wDAAS,CAACkC,UAAU,CAAC;MAEjD;MACA;MACA,IAAI9B,iEAAgB,CAAC,IAAI,CAACG,UAAU,CAAC,IAAIyB,UAAU,CAAC,WAAW,CAAC,EAAE;QAChE;QACA,IAAI,CAACC,gBAAgB,CAACE,IAAI,CAACH,UAAU,EAAE,CAAC,CAAC;OAC1C,MAAM;QAAE;QACP;QACA,IAAI,CAACC,gBAAgB,CAACE,IAAI,CAACH,UAAU,CAAC;;;IAG1C,OAAO,IAAI,CAACC,gBAAgB;EAC9B;EAEOG,oBAAoBA,CAAA;IACzB,MAAMrB,aAAa,GAAG,IAAI,CAACN,IAAI,CAACO,GAAG,CAAoB,yCAAyC,CAAC,CAChGC,IAAI,CACHnB,mDAAG,CACAoB,IAAuB,IAAI;MAC1B,MAAMM,cAAc,GAAGzB,kCAAK,EAAE,CAACY,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAACA,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,CAACA,GAAG,CAAC,EAAE,EAAE,QAAQ,CAAC,CAACC,MAAM,CAAC,qBAAqB,CAAW;MACrH,MAAMyB,kBAAkB,GAAG;QAAC,GAAGnB,IAAI;QAAEM;MAAc,CAAC;MAEpD;MACA;MACA,MAAMc,OAAO,GAAG,IAAIpC,2EAAiB,EAAE;MAEvC;MACA;MACA;MACAyB,MAAM,CAACC,MAAM,CAACU,OAAO,EAAED,kBAAkB,CAAC;MAE1C,OAAOC,OAAO;IAChB,CAAC,CACF,CACF;IAED;IACA;IACA;IACA,MAAMT,gBAAgB,GAAG,IAAI,CAACrB,mBAAmB,CAACsB,oBAAoB,CAAC,qBAAqB,EAAEf,aAAa,CAAC;IAE5G,OAAOc,gBAAgB;EACzB;EAEOU,eAAeA,CAACP,UAAyC;IAC9D;IACA,MAAME,UAAU,GAAsB,IAAIhC,2EAAiB,EAAE;IAC7D,IAAI,CAACsC,gBAAgB,GAAG,IAAIxC,wDAAS,CAACkC,UAAU,CAAC;IAEjD;IACA;IACA,IAAI9B,iEAAgB,CAAC,IAAI,CAACG,UAAU,CAAC,IAAIyB,UAAU,CAAC,WAAW,CAAC,EAAE;MAChE;MACA,IAAI,CAACQ,gBAAgB,CAACL,IAAI,CAACH,UAAU,EAAE,CAAC,CAAC;KAC1C,MAAM;MAAE;MACP;MACA,IAAI,CAACQ,gBAAgB,CAACL,IAAI,CAACH,UAAU,CAAC;;IAGxC,OAAO,IAAI,CAACQ,gBAAgB;EAC9B;EAAC,QAAAC,CAAA;qBA3HUpC,YAAY,EAAAqC,sDAAA,CAKb9C,sDAAW,GAAA8C,sDAAA,CAAAE,6EAAA,GAAAF,sDAAA,CAAAG,4DAAA;EAAA;EAAA,QAAAC,EAAA;WALVzC,YAAY;IAAA0C,OAAA,EAAZ1C,YAAY,CAAA2C;EAAA;;;;;;;;;;;;;;;;;;;ACfM;AAEqB;AAE9C,MAAO9C,iBAAkB,SAAQ+C,yDAAU;EAgC/C3C,YAAA;IACE,KAAK,EAAE;IAhCT,KAAA4C,cAAc,GAAkB,CAC9B,EAAE,EACF,EAAE,EACF,EAAE,CACH;IAMD;IACA;IACA,KAAA1B,cAAc,GAAWzB,kCAAK,EAAE,CAACY,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAACC,MAAM,CAAC,qBAAqB,CAAW;IACtF,KAAAuC,YAAY,GAA6D,CACvE;MACEC,IAAI,EAAE,EAAE;MACRC,IAAI,EAAE,EAAE;MACRC,WAAW,EAAE;KACd,EACD;MACEF,IAAI,EAAE,EAAE;MACRC,IAAI,EAAE,EAAE;MACRC,WAAW,EAAE;KACd,EACD;MACEF,IAAI,EAAE,EAAE;MACRC,IAAI,EAAE,EAAE;MACRC,WAAW,EAAE;KACd,CACF;EAID;;;;;;;;;;;;;;;;;;;;ACtC6B;AAEqB;AAE9C,MAAOC,cAAc;EAA3BjD,YAAA;IAME;IACA;IACA,KAAAkB,cAAc,GAAWzB,kCAAK,EAAE,CAACY,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAACC,MAAM,CAAC,qBAAqB,CAAW;EACxF;;AAEM,MAAOX,iBAAkB,SAAQgD,yDAAU;EAQ/C3C,YAAA;IACE,KAAK,EAAE;IART,KAAAa,KAAK,GAA0B,CAC7B,IAAIoC,cAAc,EAAE,EACpB,IAAIA,cAAc,EAAE,EACpB,IAAIA,cAAc,EAAE,EACpB,IAAIA,cAAc,EAAE,CACrB;EAID;;;;;;;;;;;;;;;;;;;;;ACxB6C;AACF;AAEe;AACd;;AAgBxC,MAAOK,WAAW;EAAA,QAAAnB,CAAA;qBAAXmB,WAAW;EAAA;EAAA,QAAAd,EAAA;UAAXc;EAAW;EAAA,QAAAC,EAAA;cAZpBL,yDAAY,EACZC,uDAAW;EAAA;;;sHAWFG,WAAW;IAAAE,YAAA,GARpBJ,qEAAkB,EAClBC,uDAAW;IAAAI,OAAA,GALXP,yDAAY,EACZC,uDAAW;IAAAO,OAAA,GAOXN,qEAAkB,EAClBC,uDAAW;EAAA;AAAA;;;;;;;;;;;;;;;;;;;;AChBgB;AAC2B;;AAGpD,MAAOA,WAAW;EACtBO,SAASA,CAACC,KAAU,EAAEC,kBAAA,GAA8B,KAAK;IACvDrE,yCAAY,CAACkE,sDAAY,CAAC;IAC1B,IAAIK,OAAO,GAAG,EAAE;IAEhB,IAAIH,KAAK,EAAE;MACT,MAAMI,aAAa,GAAGH,kBAAkB,KAAMrE,kCAAK,CAACoE,KAAK,CAAC,CAACK,IAAI,CAACzE,kCAAK,EAAE,EAAE,KAAK,CAAC,GAAG,CAAC,GAAI,KAAK,GAAG,IAAI,CAAC;MACpGuE,OAAO,GAAGvE,kCAAK,EAAE,CAAC0E,EAAE,CAAC1E,kCAAK,CAACoE,KAAK,CAAC,EAAEI,aAAa,CAAC;;IAGnD,OAAOD,OAAO;EAChB;EAAC,QAAA7B,CAAA;qBAXUkB,WAAW;EAAA;EAAA,QAAAb,EAAA;;UAAXa,WAAW;IAAAe,IAAA;EAAA;;;;;;;;;;;;;;;;;;;ACJO;;AAGzB,MAAOhB,kBAAkB;EAC7BQ,SAASA,CAACC,KAAU;IAClB,OAAOpE,kCAAK,CAACoE,KAAK,CAAC,CAACK,IAAI,CAACzE,kCAAK,EAAE,EAAE,KAAK,CAAC;EAC1C;EAAC,QAAA0C,CAAA;qBAHUiB,kBAAkB;EAAA;EAAA,QAAAZ,EAAA;;UAAlBY,kBAAkB;IAAAgB,IAAA;EAAA;;;;;;;;;;;;;;;;;;;;;;;;ACLqC;AACb;AACM;AAEvD,MAAOzB,UAAU;EAAvB3C,YAAA;IACE,KAAA2E,OAAO,GAAG,KAAK;EACjB;;AAEM,MAAOjF,SAAS;EAQpBM,YAAoB4B,UAAa;IAAb,KAAAA,UAAU,GAAVA,UAAU;IAP9B;IACA;IACA;IACQ,KAAAgD,YAAY,GAAIF,iFAA0B,IAAIA,8FAAuC,GAAIA,8FAAuC,GAAG,CAAC;IAEpI,KAAAI,QAAQ,GAAkC,IAAIP,+CAAa,CAAC,CAAC,CAAC;EAEjC;EAErC;EACA;EACA;EACO,OAAOQ,WAAWA,CAAIC,cAA6B,EAAEpD,UAAa,EAAEgD,YAAY,GAAG,GAAG;IAC3F,MAAMK,eAAe,GAAGZ,wCAAE,CAAC,IAAI,CAAC,CAAC1D,IAAI,CACnC6D,qDAAK,CAACI,YAAY,CAAC,CACpB;IAED;IACA;IACA,OAAON,mDAAa,CAAC,CACnBW,eAAe,EACfD,cAAc,CACf,CAAC,CAACrE,IAAI;IACL;IACAnB,mDAAG,CAAC,CAAC,CAAC0F,UAAU,EAAEC,SAAS,CAAe,KAAuB9D,MAAM,CAACC,MAAM,CAAC6D,SAAS,EAAE;MAACR,OAAO,EAAE;IAAK,CAAC,CAAC,CAAC;IAC5G;IACAF,yDAAS,CAACpD,MAAM,CAACC,MAAM,CAACM,UAAU,EAAE;MAAC+C,OAAO,EAAE;IAAI,CAAC,CAAC,CAAC,CACtD;EACH;EAEA9C,IAAIA,CAACuD,oBAAmC,EAAER,YAAqB;IAC7D;IACA,MAAMJ,KAAK,GAAI,OAAOI,YAAY,KAAK,QAAQ,GAAIA,YAAY,GAAG,IAAI,CAACA,YAAY;IAEnF,IAAIS,mBAAoC;IAExC;IACA,IAAIb,KAAK,KAAK,CAAC,EAAE;MACfa,mBAAmB,GAAGD,oBAAoB;KAC3C,MAAM;MACLC,mBAAmB,GAAG3F,SAAS,CAACqF,WAAW,CAACK,oBAAoB,EAAE,IAAI,CAACxD,UAAU,EAAE4C,KAAK,CAAC;;IAG3Fa,mBAAmB,CAClBC,SAAS,CAAEH,SAAyB,IAAI;MACvC,IAAI,CAACL,QAAQ,CAACS,IAAI,CAACJ,SAAS,CAAC;IAC/B,CAAC,CAAC;EACJ;EAEA,IAAWK,KAAKA,CAAA;IACd,OAAO,IAAI,CAACV,QAAQ,CAACW,YAAY,EAAE;EACrC;;;;;;;;;;;;;;;;;;AC5D8C;AACV;AAMhC,MAAOC,cAAc;EACzB;EACO,OAAOC,WAAWA,CAAIC,MAA0B,EAAE5F,WAAuC;IAC9F,IAAI4F,MAAM,YAAYlG,wDAAS,EAAE;MAC/B,OAAOkG,MAAM,CAACJ,KAAK;KACpB,MAAM,IAAII,MAAM,YAAY5F,WAAW,EAAE;MACxC;MACA;MACA;MACA,OAAOqE,wCAAE,CAACuB,MAAM,CAAC;;EAErB;;;;;;;;;;;AClBF,CAAC,UAASC,CAAC,EAACC,CAAC,EAAC;EAAC,KAAoD,GAACC,MAAM,CAACrC,OAAO,GAACoC,CAAC,CAAC,CAAC,GAAC,CAAmI;AAAA,CAAC,CAAC,IAAI,EAAE,YAAU;EAAC,YAAY;;EAAC,OAAO,UAASD,CAAC,EAACC,CAAC,EAACO,CAAC,EAAC;IAACR,CAAC,GAACA,CAAC,IAAE,CAAC,CAAC;IAAC,IAAIS,CAAC,GAACR,CAAC,CAACS,SAAS;MAACC,CAAC,GAAC;QAACC,MAAM,EAAC,OAAO;QAACC,IAAI,EAAC,QAAQ;QAACC,CAAC,EAAC,eAAe;QAACC,CAAC,EAAC,UAAU;QAACC,EAAE,EAAC,YAAY;QAACC,CAAC,EAAC,SAAS;QAACC,EAAE,EAAC,UAAU;QAACC,CAAC,EAAC,OAAO;QAACC,EAAE,EAAC,SAAS;QAACC,CAAC,EAAC,SAAS;QAACC,EAAE,EAAC,WAAW;QAACC,CAAC,EAAC,QAAQ;QAACC,EAAE,EAAC;MAAU,CAAC;IAAC,SAASC,CAACA,CAACzB,CAAC,EAACC,CAAC,EAACO,CAAC,EAACG,CAAC,EAAC;MAAC,OAAOF,CAAC,CAACiB,UAAU,CAAC1B,CAAC,EAACC,CAAC,EAACO,CAAC,EAACG,CAAC,CAAC;IAAA;IAACH,CAAC,CAACmB,EAAE,CAAC7D,YAAY,GAAC6C,CAAC,EAACF,CAAC,CAACiB,UAAU,GAAC,UAASzB,CAAC,EAACQ,CAAC,EAACgB,CAAC,EAACN,CAAC,EAACS,CAAC,EAAC;MAAC,KAAI,IAAIC,CAAC,EAACC,CAAC,EAAChB,CAAC,EAACiB,CAAC,GAACN,CAAC,CAACO,OAAO,CAAC,CAAC,CAAClE,YAAY,IAAE6C,CAAC,EAACM,CAAC,GAACjB,CAAC,CAACiC,UAAU,IAAE,CAAC;UAACF,CAAC,EAAC,GAAG;UAAC/B,CAAC,EAAC,EAAE;UAACmB,CAAC,EAAC;QAAQ,CAAC,EAAC;UAACY,CAAC,EAAC,GAAG;UAAC/B,CAAC,EAAC;QAAE,CAAC,EAAC;UAAC+B,CAAC,EAAC,IAAI;UAAC/B,CAAC,EAAC,EAAE;UAACmB,CAAC,EAAC;QAAQ,CAAC,EAAC;UAACY,CAAC,EAAC,GAAG;UAAC/B,CAAC,EAAC;QAAE,CAAC,EAAC;UAAC+B,CAAC,EAAC,IAAI;UAAC/B,CAAC,EAAC,EAAE;UAACmB,CAAC,EAAC;QAAM,CAAC,EAAC;UAACY,CAAC,EAAC,GAAG;UAAC/B,CAAC,EAAC;QAAE,CAAC,EAAC;UAAC+B,CAAC,EAAC,IAAI;UAAC/B,CAAC,EAAC,EAAE;UAACmB,CAAC,EAAC;QAAK,CAAC,EAAC;UAACY,CAAC,EAAC,GAAG;UAAC/B,CAAC,EAAC;QAAE,CAAC,EAAC;UAAC+B,CAAC,EAAC,IAAI;UAAC/B,CAAC,EAAC,EAAE;UAACmB,CAAC,EAAC;QAAO,CAAC,EAAC;UAACY,CAAC,EAAC,GAAG;UAAC/B,CAAC,EAAC;QAAE,CAAC,EAAC;UAAC+B,CAAC,EAAC,IAAI;UAACZ,CAAC,EAAC;QAAM,CAAC,CAAC,EAACJ,CAAC,GAACE,CAAC,CAACiB,MAAM,EAACC,CAAC,GAAC,CAAC,EAACA,CAAC,GAACpB,CAAC,EAACoB,CAAC,IAAE,CAAC,EAAC;QAAC,IAAIZ,CAAC,GAACN,CAAC,CAACkB,CAAC,CAAC;QAACZ,CAAC,CAACJ,CAAC,KAAGU,CAAC,GAACV,CAAC,GAACX,CAAC,CAACP,CAAC,CAAC,CAAC5B,IAAI,CAACoD,CAAC,EAACF,CAAC,CAACJ,CAAC,EAAC,CAAC,CAAC,CAAC,GAACM,CAAC,CAACpD,IAAI,CAAC4B,CAAC,EAACsB,CAAC,CAACJ,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC;QAAC,IAAIiB,CAAC,GAAC,CAACpC,CAAC,CAACqC,QAAQ,IAAEC,IAAI,CAACC,KAAK,EAAED,IAAI,CAACE,GAAG,CAACX,CAAC,CAAC,CAAC;QAAC,IAAGf,CAAC,GAACe,CAAC,GAAC,CAAC,EAACO,CAAC,IAAEb,CAAC,CAACvB,CAAC,IAAE,CAACuB,CAAC,CAACvB,CAAC,EAAC;UAACoC,CAAC,IAAE,CAAC,IAAED,CAAC,GAAC,CAAC,KAAGZ,CAAC,GAACN,CAAC,CAACkB,CAAC,GAAC,CAAC,CAAC,CAAC;UAAC,IAAIM,CAAC,GAACV,CAAC,CAACR,CAAC,CAACQ,CAAC,CAAC;UAACH,CAAC,KAAGQ,CAAC,GAACR,CAAC,CAAC,EAAE,GAACQ,CAAC,CAAC,CAAC,EAACN,CAAC,GAAC,QAAQ,IAAE,OAAOW,CAAC,GAACA,CAAC,CAACC,OAAO,CAAC,IAAI,EAACN,CAAC,CAAC,GAACK,CAAC,CAACL,CAAC,EAAC3B,CAAC,EAACc,CAAC,CAACQ,CAAC,EAACjB,CAAC,CAAC;UAAC;QAAK;MAAC;MAAC,IAAGL,CAAC,EAAC,OAAOqB,CAAC;MAAC,IAAIT,CAAC,GAACP,CAAC,GAACiB,CAAC,CAACnB,MAAM,GAACmB,CAAC,CAAClB,IAAI;MAAC,OAAM,UAAU,IAAE,OAAOQ,CAAC,GAACA,CAAC,CAACS,CAAC,CAAC,GAACT,CAAC,CAACqB,OAAO,CAAC,IAAI,EAACZ,CAAC,CAAC;IAAA,CAAC,EAACrB,CAAC,CAACnC,EAAE,GAAC,UAAS0B,CAAC,EAACC,CAAC,EAAC;MAAC,OAAOwB,CAAC,CAACzB,CAAC,EAACC,CAAC,EAAC,IAAI,EAAC,CAAC,CAAC,CAAC;IAAA,CAAC,EAACQ,CAAC,CAACkC,IAAI,GAAC,UAAS3C,CAAC,EAACC,CAAC,EAAC;MAAC,OAAOwB,CAAC,CAACzB,CAAC,EAACC,CAAC,EAAC,IAAI,CAAC;IAAA,CAAC;IAAC,IAAIkB,CAAC,GAAC,SAAAA,CAASnB,CAAC,EAAC;MAAC,OAAOA,CAAC,CAAC4C,EAAE,GAACpC,CAAC,CAACqC,GAAG,CAAC,CAAC,GAACrC,CAAC,CAAC,CAAC;IAAA,CAAC;IAACC,CAAC,CAACqC,KAAK,GAAC,UAAS9C,CAAC,EAAC;MAAC,OAAO,IAAI,CAAC1B,EAAE,CAAC6C,CAAC,CAAC,IAAI,CAAC,EAACnB,CAAC,CAAC;IAAA,CAAC,EAACS,CAAC,CAACsC,OAAO,GAAC,UAAS/C,CAAC,EAAC;MAAC,OAAO,IAAI,CAAC2C,IAAI,CAACxB,CAAC,CAAC,IAAI,CAAC,EAACnB,CAAC,CAAC;IAAA,CAAC;EAAA,CAAC;AAAA,CAAE,CAAC","sources":["./src/app/deals/deals.service.ts","./src/app/deals/details/deals-details.model.ts","./src/app/deals/listing/deals-listing.model.ts","./src/app/pipes/pipes.module.ts","./src/app/pipes/time-ago.pipe.ts","./src/app/pipes/time-difference.pipe.ts","./src/app/shell/data-store.ts","./src/app/utils/resolver-helper.ts","./node_modules/dayjs/plugin/relativeTime.js"],"sourcesContent":["import { Inject, Injectable, PLATFORM_ID } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport * as dayjs from 'dayjs';\n\nimport { DataStore } from '../shell/data-store';\nimport { DealsListingModel } from './listing/deals-listing.model';\nimport { DealsDetailsModel } from './details/deals-details.model';\nimport { TransferStateHelper } from '../utils/transfer-state-helper';\nimport { isPlatformServer } from '@angular/common';\n\n@Injectable()\nexport class DealsService {\n  private listingDataStore: DataStore<DealsListingModel>;\n  private detailsDataStore: DataStore<DealsDetailsModel>;\n\n  constructor(\n    @Inject(PLATFORM_ID) private platformId: object,\n    private transferStateHelper: TransferStateHelper,\n    private http: HttpClient\n  ) { }\n\n  get relativeDates(): Array<string> {\n    return [\n      dayjs().add(1, 'day').add(8, 'hour').add(10, 'second').format('MM/DD/YYYY HH:mm:ss') as string,\n      dayjs().add(7, 'day').format('MM/DD/YYYY') as string,\n      dayjs().subtract(1, 'month').format('MM/DD/YYYY') as string,\n      dayjs().add(2, 'month').format('MM/DD/YYYY') as string\n    ];\n  }\n\n  public getListingDataSource(): Observable<DealsListingModel> {\n    const rawDataSource = this.http.get<DealsListingModel>('./assets/sample-data/deals/listing.json')\n    .pipe(\n      map(\n        (data: DealsListingModel) => {\n          // Using rest operator to divide the data (see: https://dev.to/napoleon039/how-to-use-the-spread-and-rest-operator-4jbb)\n          const {items, ...otherData} = data;\n\n          const itemsWithRelativeDates = items.map((dealItem, index) => {\n            // Relative date (better to showcase UI micro-interactions)\n            return {...dealItem, expirationDate: this.relativeDates[index]};\n          });\n\n          // Using spread operator to concat the data (see: https://dev.to/napoleon039/how-to-use-the-spread-and-rest-operator-4jbb)\n          const updatedListingData = {...otherData, items: itemsWithRelativeDates};\n\n          // Note: HttpClient cannot know how to instantiate a class for the returned data\n          // We need to properly cast types from json data\n          const listing = new DealsListingModel();\n\n          // The Object.assign() method copies all enumerable own properties from one or more source objects to a target object.\n          // Note: If you have non-enummerable properties, you can try a spread operator instead. listing = {...data};\n          // (see: https://scotch.io/bar-talk/copying-objects-in-javascript#toc-using-spread-elements-)\n          Object.assign(listing, updatedListingData);\n\n          return listing;\n        }\n      )\n    );\n\n    // This method tapps into the raw data source and stores the resolved data in the TransferState, then when\n    // transitioning from the server rendered view to the browser, checks if we already loaded the data in the server to prevent\n    // duplicate http requests.\n    const cachedDataSource = this.transferStateHelper.checkDataSourceState('deals-listing-state', rawDataSource);\n\n    return cachedDataSource;\n  }\n\n  public getListingStore(dataSource: Observable<DealsListingModel>): DataStore<DealsListingModel> {\n    // Use cache if available\n    if (!this.listingDataStore) {\n      // Initialize the model specifying that it is a shell model\n      const shellModel: DealsListingModel = new DealsListingModel();\n      this.listingDataStore = new DataStore(shellModel);\n\n      // If running in the server, then don't add shell to the Data Store\n      // If we already loaded the Data Source in the server, then don't show a shell when transitioning back to the broswer from the server\n      if (isPlatformServer(this.platformId) || dataSource['ssr_state']) {\n        // Trigger loading mechanism with 0 delay (this will prevent the shell to be shown)\n        this.listingDataStore.load(dataSource, 0);\n      } else { // On browser transitions\n        // Trigger the loading mechanism (with shell)\n        this.listingDataStore.load(dataSource);\n      }\n    }\n    return this.listingDataStore;\n  }\n\n  public getDetailsDataSource(): Observable<DealsDetailsModel> {\n    const rawDataSource = this.http.get<DealsDetailsModel>('./assets/sample-data/deals/details.json')\n    .pipe(\n      map(\n        (data: DealsDetailsModel) => {\n          const expirationDate = dayjs().add(1, 'day').add(8, 'hour').add(10, 'second').format('MM/DD/YYYY HH:mm:ss') as string;\n          const updatedDetailsData = {...data, expirationDate};\n\n          // Note: HttpClient cannot know how to instantiate a class for the returned data\n          // We need to properly cast types from json data\n          const details = new DealsDetailsModel();\n\n          // The Object.assign() method copies all enumerable own properties from one or more source objects to a target object.\n          // Note: If you have non-enummerable properties, you can try a spread operator instead. details = {...data};\n          // (see: https://scotch.io/bar-talk/copying-objects-in-javascript#toc-using-spread-elements-)\n          Object.assign(details, updatedDetailsData);\n\n          return details;\n        }\n      )\n    );\n\n    // This method tapps into the raw data source and stores the resolved data in the TransferState, then when\n    // transitioning from the server rendered view to the browser, checks if we already loaded the data in the server to prevent\n    // duplicate http requests.\n    const cachedDataSource = this.transferStateHelper.checkDataSourceState('deals-details-state', rawDataSource);\n\n    return cachedDataSource;\n  }\n\n  public getDetailsStore(dataSource: Observable<DealsDetailsModel>): DataStore<DealsDetailsModel> {\n    // Initialize the model specifying that it is a shell model\n    const shellModel: DealsDetailsModel = new DealsDetailsModel();\n    this.detailsDataStore = new DataStore(shellModel);\n\n    // If running in the server, then don't add shell to the Data Store\n    // If we already loaded the Data Source in the server, then don't show a shell when transitioning back to the broswer from the server\n    if (isPlatformServer(this.platformId) || dataSource['ssr_state']) {\n      // Trigger loading mechanism with 0 delay (this will prevent the shell to be shown)\n      this.detailsDataStore.load(dataSource, 0);\n    } else { // On browser transitions\n      // Trigger the loading mechanism (with shell)\n      this.detailsDataStore.load(dataSource);\n    }\n\n    return this.detailsDataStore;\n  }\n\n}\n","import * as dayjs from 'dayjs';\n\nimport { ShellModel } from '../../shell/data-store';\n\nexport class DealsDetailsModel extends ShellModel {\n  showcaseImages: Array<string> = [\n    '',\n    '',\n    ''\n  ];\n  previewImage: string;\n  logo: string;\n  name: string;\n  code: string;\n  description: string;\n  // Default mock value\n  // expirationDate = '03/03/2019';\n  expirationDate: string = dayjs().add(5, 'day').format('MM/DD/YYYY HH:mm:ss') as string;\n  relatedDeals: Array<{logo: string, name: string, description: string}> = [\n    {\n      logo: '',\n      name: '',\n      description: ''\n    },\n    {\n      logo: '',\n      name: '',\n      description: ''\n    },\n    {\n      logo: '',\n      name: '',\n      description: ''\n    }\n  ];\n\n  constructor() {\n    super();\n  }\n}\n","import * as dayjs from 'dayjs';\n\nimport { ShellModel } from '../../shell/data-store';\n\nexport class DealsItemModel {\n  slug: string;\n  logo: string;\n  name: string;\n  code: string;\n  description: string;\n  // Default mock value\n  // expirationDate = '12/01/2018';\n  expirationDate: string = dayjs().add(5, 'day').format('MM/DD/YYYY HH:mm:ss') as string;\n}\n\nexport class DealsListingModel extends ShellModel {\n  items: Array<DealsItemModel> = [\n    new DealsItemModel(),\n    new DealsItemModel(),\n    new DealsItemModel(),\n    new DealsItemModel()\n  ];\n\n  constructor() {\n    super();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\n\nimport { TimeDifferencePipe } from './time-difference.pipe';\nimport { TimeAgoPipe } from './time-ago.pipe';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    IonicModule\n  ],\n  declarations: [\n    TimeDifferencePipe,\n    TimeAgoPipe\n  ],\n  exports: [\n    TimeDifferencePipe,\n    TimeAgoPipe\n  ]\n})\nexport class PipesModule {}\n","import { Pipe, PipeTransform } from '@angular/core';\n\nimport * as dayjs from 'dayjs';\nimport * as relativeTime from 'dayjs/plugin/relativeTime';\n\n@Pipe({ name: 'appTimeAgo' })\nexport class TimeAgoPipe implements PipeTransform {\n  transform(value: any, withoutSuffixParam: boolean = false): string {\n    dayjs.extend(relativeTime);\n    let timeAgo = '';\n\n    if (value) {\n      const withoutSuffix = withoutSuffixParam || ((dayjs(value).diff(dayjs(), 'day') < 0) ? false : true);\n      timeAgo = dayjs().to(dayjs(value), withoutSuffix);\n    }\n\n    return timeAgo;\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\nimport * as dayjs from 'dayjs';\n\n@Pipe({ name: 'appTimeDifference' })\nexport class TimeDifferencePipe implements PipeTransform {\n  transform(value: any): number {\n    return dayjs(value).diff(dayjs(), 'day');\n  }\n}\n","import { Observable, of, combineLatest, ReplaySubject } from 'rxjs';\nimport { delay, map, startWith } from 'rxjs/operators';\nimport { environment } from '../../environments/environment';\n\nexport class ShellModel {\n  isShell = false;\n}\n\nexport class DataStore<T> {\n  // We wait on purpose 2 secs on local environment when fetching from json to simulate the backend roundtrip.\n  // However, in production you should set this delay to 0 in the environment.prod file.\n  // eslint-disable-next-line max-len\n  private networkDelay = (environment.appShellConfig && environment.appShellConfig.networkDelay) ? environment.appShellConfig.networkDelay : 0;\n\n  private timeline: ReplaySubject<T & ShellModel> = new ReplaySubject(1);\n\n  constructor(private shellModel: T) { }\n\n  // Static function with generics\n  // (ref: https://stackoverflow.com/a/24293088/1116959)\n  // Append a shell (T & ShellModel) to every value (T) emmited to the timeline\n  public static AppendShell<T>(dataObservable: Observable<T>, shellModel: T, networkDelay = 400): Observable<T & ShellModel> {\n    const delayObservable = of(true).pipe(\n      delay(networkDelay)\n    );\n\n    // Assign shell flag accordingly\n    // (ref: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\n    return combineLatest([\n      delayObservable,\n      dataObservable\n    ]).pipe(\n      // Dismiss unnecessary delayValue\n      map(([delayValue, dataValue]: [boolean, T]): (T & ShellModel) => Object.assign(dataValue, {isShell: false})),\n      // Set the shell model as the initial value\n      startWith(Object.assign(shellModel, {isShell: true}))\n    );\n  }\n\n  load(dataSourceObservable: Observable<T>, networkDelay?: number): void {\n    // eslint-disable-next-line no-shadow, @typescript-eslint/no-shadow\n    const delay = (typeof networkDelay === 'number') ? networkDelay : this.networkDelay;\n\n    let processedDataSource: Observable<any>;\n\n    // If no network delay, then don't show shell\n    if (delay === 0) {\n      processedDataSource = dataSourceObservable;\n    } else {\n      processedDataSource = DataStore.AppendShell(dataSourceObservable, this.shellModel, delay);\n    }\n\n    processedDataSource\n    .subscribe((dataValue: T & ShellModel) => {\n      this.timeline.next(dataValue);\n    });\n  }\n\n  public get state(): Observable<T & ShellModel> {\n    return this.timeline.asObservable();\n  }\n}\n","import { DataStore } from '../shell/data-store';\nimport { Observable, of } from 'rxjs';\n\nexport interface IResolvedRouteData<T> {\n  data: T | DataStore<T>;\n}\n\nexport class ResolverHelper<T> {\n  // More info on function overloads here: https://www.typescriptlang.org/docs/handbook/functions.html#overloads\n  public static extractData<T>(source: (T | DataStore<T>), constructor: (new(...args: any[]) => T)): Observable<T> {\n    if (source instanceof DataStore) {\n      return source.state;\n    } else if (source instanceof constructor) {\n      // The right side of instanceof should be an expression evaluating to a constructor function (ie. a class), not a type\n      // That's why we included an extra parameter which acts as a constructor function for type T\n      // (see: https://github.com/microsoft/TypeScript/issues/5236)\n      return of(source);\n    }\n  }\n}\n","!function(r,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(r=\"undefined\"!=typeof globalThis?globalThis:r||self).dayjs_plugin_relativeTime=e()}(this,(function(){\"use strict\";return function(r,e,t){r=r||{};var n=e.prototype,o={future:\"in %s\",past:\"%s ago\",s:\"a few seconds\",m:\"a minute\",mm:\"%d minutes\",h:\"an hour\",hh:\"%d hours\",d:\"a day\",dd:\"%d days\",M:\"a month\",MM:\"%d months\",y:\"a year\",yy:\"%d years\"};function i(r,e,t,o){return n.fromToBase(r,e,t,o)}t.en.relativeTime=o,n.fromToBase=function(e,n,i,d,u){for(var f,a,s,l=i.$locale().relativeTime||o,h=r.thresholds||[{l:\"s\",r:44,d:\"second\"},{l:\"m\",r:89},{l:\"mm\",r:44,d:\"minute\"},{l:\"h\",r:89},{l:\"hh\",r:21,d:\"hour\"},{l:\"d\",r:35},{l:\"dd\",r:25,d:\"day\"},{l:\"M\",r:45},{l:\"MM\",r:10,d:\"month\"},{l:\"y\",r:17},{l:\"yy\",d:\"year\"}],m=h.length,c=0;c<m;c+=1){var y=h[c];y.d&&(f=d?t(e).diff(i,y.d,!0):i.diff(e,y.d,!0));var p=(r.rounding||Math.round)(Math.abs(f));if(s=f>0,p<=y.r||!y.r){p<=1&&c>0&&(y=h[c-1]);var v=l[y.l];u&&(p=u(\"\"+p)),a=\"string\"==typeof v?v.replace(\"%d\",p):v(p,n,y.l,s);break}}if(n)return a;var M=s?l.future:l.past;return\"function\"==typeof M?M(a):M.replace(\"%s\",a)},n.to=function(r,e){return i(r,e,this,!0)},n.from=function(r,e){return i(r,e,this)};var d=function(r){return r.$u?t.utc():t()};n.toNow=function(r){return this.to(d(this),r)},n.fromNow=function(r){return this.from(d(this),r)}}}));"],"names":["PLATFORM_ID","HttpClient","map","dayjs","DataStore","DealsListingModel","DealsDetailsModel","TransferStateHelper","isPlatformServer","DealsService","constructor","platformId","transferStateHelper","http","relativeDates","add","format","subtract","getListingDataSource","rawDataSource","get","pipe","data","items","otherData","itemsWithRelativeDates","dealItem","index","expirationDate","updatedListingData","listing","Object","assign","cachedDataSource","checkDataSourceState","getListingStore","dataSource","listingDataStore","shellModel","load","getDetailsDataSource","updatedDetailsData","details","getDetailsStore","detailsDataStore","_","i0","ɵɵinject","i1","i2","_2","factory","ɵfac","ShellModel","showcaseImages","relatedDeals","logo","name","description","DealsItemModel","CommonModule","IonicModule","TimeDifferencePipe","TimeAgoPipe","PipesModule","_3","declarations","imports","exports","relativeTime","transform","value","withoutSuffixParam","extend","timeAgo","withoutSuffix","diff","to","pure","of","combineLatest","ReplaySubject","delay","startWith","environment","isShell","networkDelay","appShellConfig","timeline","AppendShell","dataObservable","delayObservable","delayValue","dataValue","dataSourceObservable","processedDataSource","subscribe","next","state","asObservable","ResolverHelper","extractData","source","r","e","module","define","amd","globalThis","self","dayjs_plugin_relativeTime","t","n","prototype","o","future","past","s","m","mm","h","hh","d","dd","M","MM","y","yy","i","fromToBase","en","u","f","a","l","$locale","thresholds","length","c","p","rounding","Math","round","abs","v","replace","from","$u","utc","toNow","fromNow"],"sourceRoot":"webpack:///","x_google_ignoreList":[8]}