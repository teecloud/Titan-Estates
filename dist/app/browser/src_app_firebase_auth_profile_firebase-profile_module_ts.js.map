{"version":3,"file":"src_app_firebase_auth_profile_firebase-profile_module_ts.js","mappings":"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","sources":["./src/app/firebase/auth/profile/firebase-profile.module.ts","./src/app/firebase/auth/profile/firebase-profile.page.ts","./src/app/firebase/auth/profile/firebase-profile.page.html","./src/app/firebase/auth/profile/firebase-profile.resolver.ts","./src/app/utils/resolver-helper.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\nimport { IonicModule } from '@ionic/angular';\n\nimport { redirectUnauthorizedTo, canActivate, AuthPipe } from '@angular/fire/auth-guard';\n\nimport { ComponentsModule } from '../../../components/components.module';\nimport { FirebaseProfilePage } from './firebase-profile.page';\nimport { FirebaseProfileResolver } from './firebase-profile.resolver';\n\n\nconst redirectUnauthorizedToLogin: () => AuthPipe = () => redirectUnauthorizedTo(['/firebase/auth/sign-in']);\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FirebaseProfilePage,\n    resolve: {\n      data: FirebaseProfileResolver\n    },\n    ...canActivate(redirectUnauthorizedToLogin)\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    ComponentsModule\n  ],\n  declarations: [\n    FirebaseProfilePage\n  ],\n  providers: [\n    FirebaseProfileResolver\n  ]\n})\nexport class FirebaseProfilePageModule {}\n","import { Component, OnInit, HostBinding } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\n\nimport { Subscription } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\n\nimport { IResolvedRouteData, ResolverHelper } from '../../../utils/resolver-helper';\n\nimport { FirebaseProfileModel } from './firebase-profile.model';\nimport { FirebaseAuthService } from '../firebase-auth.service';\n\n\n@Component({\n  selector: 'app-firebase-profile',\n  templateUrl: './firebase-profile.page.html',\n  styleUrls: [\n    './styles/firebase-profile.page.scss',\n    './styles/firebase-profile.shell.scss'\n  ]\n})\nexport class FirebaseProfilePage implements OnInit {\n  // ? Gather all component subscription in one place. Can be one Subscription or multiple (chained using the Subscription.add() method)\n  subscriptions: Subscription;\n  user: FirebaseProfileModel;\n\n  @HostBinding('class.is-shell') get isShell() {\n    return (this.user && this.user.isShell) ? true : false;\n  }\n\n  constructor(\n    private router: Router,\n    private route: ActivatedRoute,\n    public authService: FirebaseAuthService\n  ) {}\n\n  ngOnInit() {\n    this.subscriptions = this.route.data\n    .pipe(\n      // ? Extract data for this page\n      switchMap((resolvedRouteData: IResolvedRouteData<FirebaseProfileModel>) => {\n        return ResolverHelper.extractData<FirebaseProfileModel>(resolvedRouteData.data, FirebaseProfileModel);\n      })\n    )\n    .subscribe({\n      next: (state) => {\n        this.user = state;\n      },\n      error: (error) => console.log(error)\n    });\n  }\n\n  public async signOut(): Promise<void> {\n    try {\n      // * 1. Sign out on the native layer\n      await this.authService.signOut()\n      .then((result) => {\n        // ? Sign-out successful\n        // ? Replace state as we are no longer authorized to access profile page\n        this.router.navigate(['firebase/auth/sign-in'], { replaceUrl: true });\n      })\n      .catch((error) => {\n        console.log('userProfile - signOut() - error', error);\n      });\n    } finally {\n      console.log('userProfile - signOut() - finally');\n    }\n  }\n\n  // ? NOTE: Ionic only calls ngOnDestroy if the page was popped (ex: when navigating back)\n  // ? Since ngOnDestroy might not fire when you navigate from the current page, use ionViewWillLeave to cleanup Subscriptions\n  ionViewWillLeave(): void {\n    this.subscriptions.unsubscribe();\n  }\n}\n","<ion-header class=\"ion-no-border\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-back-button defaultHref=\"app/categories\"></ion-back-button>\n    </ion-buttons>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"user-content\">\n  <ion-row>\n    <ion-col class=\"ion-no-padding\">\n      <app-image-shell class=\"user-image add-overlay\" [display]=\"'cover'\" animation=\"spinner\" [src]=\"user?.image ?? './assets/sample-images/avatar.png'\" [alt]=\"'item image'\">\n        <app-aspect-ratio [ratio]=\"{w:1, h:1}\">\n        </app-aspect-ratio>\n      </app-image-shell>\n    </ion-col>\n  </ion-row>\n\n  <ion-row class=\"user-details\">\n    <ion-col class=\"ion-no-padding details-wrapper\">\n      <h2 class=\"user-name\">\n        <app-text-shell [data]=\"user?.name\"></app-text-shell>\n        <ion-icon name=\"checkmark-circle\" color=\"bright-pink\"></ion-icon>\n      </h2>\n      <span class=\"user-role\">\n        <app-text-shell [data]=\"user?.role\"></app-text-shell>\n      </span>\n      <p class=\"user-description\">\n        <app-text-shell lines=\"3\" [data]=\"user?.description\"></app-text-shell>\n      </p>\n    </ion-col>\n  </ion-row>\n\n  <ion-row class=\"user-preferences-wrapper\">\n    <ion-col size=\"12\">\n      <h4 class=\"preference-name\">Mobile</h4>\n      <p class=\"preference-value\">\n        <app-text-shell [data]=\"user?.phoneNumber\"></app-text-shell>\n      </p>\n    </ion-col>\n    <ion-col size=\"12\">\n      <h4 class=\"preference-name\">Email</h4>\n      <p class=\"preference-value\">\n        <app-text-shell [data]=\"user?.email\"></app-text-shell>\n      </p>\n    </ion-col>\n    <ion-col size=\"12\">\n      <h4 class=\"preference-name\">Auth Provider</h4>\n      <p class=\"preference-value\">\n        <app-text-shell [data]=\"user?.provider\"></app-text-shell>\n      </p>\n    </ion-col>\n    <ion-col size=\"12\">\n      <ion-button class=\"sign-out-btn\" expand=\"block\" fill=\"outline\" color=\"bright-blue\" (click)=\"signOut()\">Sign out</ion-button>\n    </ion-col>\n  </ion-row>\n</ion-content>\n","import { Injectable } from '@angular/core';\nimport { Resolve } from '@angular/router';\nimport { FirebaseAuthService } from '../firebase-auth.service';\nimport { Observable } from 'rxjs';\nimport { DataStore } from '../../../shell/data-store';\nimport { FirebaseProfileModel } from './firebase-profile.model';\n\n@Injectable()\nexport class FirebaseProfileResolver implements Resolve<any> {\n\n  constructor(private firebaseAuthService: FirebaseAuthService) {}\n\n  resolve() {\n    const dataSource: Observable<FirebaseProfileModel> = this.firebaseAuthService.getProfileDataSource();\n    const dataStore: DataStore<FirebaseProfileModel> = this.firebaseAuthService.getProfileStore(dataSource);\n    return dataStore;\n  }\n}\n","import { DataStore } from '../shell/data-store';\nimport { Observable, of } from 'rxjs';\n\nexport interface IResolvedRouteData<T> {\n  data: T | DataStore<T>;\n}\n\nexport class ResolverHelper<T> {\n  // More info on function overloads here: https://www.typescriptlang.org/docs/handbook/functions.html#overloads\n  public static extractData<T>(source: (T | DataStore<T>), constructor: (new(...args: any[]) => T)): Observable<T> {\n    if (source instanceof DataStore) {\n      return source.state;\n    } else if (source instanceof constructor) {\n      // The right side of instanceof should be an expression evaluating to a constructor function (ie. a class), not a type\n      // That's why we included an extra parameter which acts as a constructor function for type T\n      // (see: https://github.com/microsoft/TypeScript/issues/5236)\n      return of(source);\n    }\n  }\n}\n"],"names":["CommonModule","FormsModule","ReactiveFormsModule","RouterModule","IonicModule","redirectUnauthorizedTo","canActivate","ComponentsModule","FirebaseProfilePage","FirebaseProfileResolver","redirectUnauthorizedToLogin","routes","path","component","resolve","data","FirebaseProfilePageModule","_","_2","_3","imports","forChild","declarations","i1","ActivatedRoute","Router","switchMap","ResolverHelper","FirebaseProfileModel","FirebaseAuthService","constructor","router","route","authService","isShell","user","ngOnInit","subscriptions","pipe","resolvedRouteData","extractData","subscribe","next","state","error","console","log","signOut","_this","_asyncToGenerator","then","result","navigate","replaceUrl","catch","ionViewWillLeave","unsubscribe","i0","ɵɵdirectiveInject","i2","selectors","hostVars","hostBindings","FirebaseProfilePage_HostBindings","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵlistener","FirebaseProfilePage_Template_ion_button_click_35_listener","ɵɵadvance","ɵɵproperty","tmp_1_0","image","undefined","ɵɵpureFunction0","_c0","name","role","description","phoneNumber","email","provider","firebaseAuthService","dataSource","getProfileDataSource","dataStore","getProfileStore","ɵɵinject","factory","ɵfac","DataStore","of","source"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}