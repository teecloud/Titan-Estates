{"version":3,"file":"src_app_deals_listing_deals-listing_module_ts.js","mappings":"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","sources":["./src/app/deals/listing/deals-listing.module.ts","./src/app/deals/listing/deals-listing.page.ts","./src/app/deals/listing/deals-listing.page.html","./src/app/deals/listing/deals-listing.resolver.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ComponentsModule } from '../../components/components.module';\nimport { PipesModule } from '../../pipes/pipes.module';\n\nimport { DealsService } from '../deals.service';\nimport { DealsListingPage } from './deals-listing.page';\nimport { DealsListingResolver } from './deals-listing.resolver';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DealsListingPage,\n    resolve: {\n      data: DealsListingResolver\n    }\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    ComponentsModule,\n    PipesModule\n  ],\n  declarations: [\n    DealsListingPage\n  ],\n  providers: [\n    DealsListingResolver,\n    DealsService\n  ]\n})\nexport class DealsListingPageModule {}\n","import { Component, OnInit, HostBinding } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Subscription } from 'rxjs';\n\nimport { IResolvedRouteData, ResolverHelper } from '../../utils/resolver-helper';\nimport { DealsListingModel } from './deals-listing.model';\nimport { switchMap } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-deals-listing',\n  templateUrl: './deals-listing.page.html',\n  styleUrls: [\n    './styles/deals-listing.page.scss',\n    './styles/deals-listing.shell.scss',\n    './styles/deals-listing.ios.scss'\n  ]\n})\nexport class DealsListingPage implements OnInit {\n  // Gather all component subscription in one place. Can be one Subscription or multiple (chained using the Subscription.add() method)\n  subscriptions: Subscription;\n\n  listing: DealsListingModel;\n\n  @HostBinding('class.is-shell') get isShell() {\n    return (this.listing && this.listing.isShell) ? true : false;\n  }\n\n  constructor(private route: ActivatedRoute) { }\n\n  ngOnInit(): void {\n    this.subscriptions = this.route.data\n    .pipe(\n      // Extract data for this page\n      switchMap((resolvedRouteData: IResolvedRouteData<DealsListingModel>) => {\n        return ResolverHelper.extractData<DealsListingModel>(resolvedRouteData.data, DealsListingModel);\n      })\n    )\n    .subscribe({\n      next: (state) => {\n        this.listing = state;\n      },\n      error: (error) => console.log(error)\n    });\n  }\n\n  // NOTE: Ionic only calls ngOnDestroy if the page was popped (ex: when navigating back)\n  // Since ngOnDestroy might not fire when you navigate from the current page, use ionViewWillLeave to cleanup Subscriptions\n  ionViewWillLeave(): void {\n    this.subscriptions.unsubscribe();\n  }\n}\n","<ion-header>\n  <ion-toolbar color=\"primary\">\n    <ion-buttons slot=\"start\">\n      <ion-back-button defaultHref=\"app/categories\"></ion-back-button>\n    </ion-buttons>\n    <ion-title>Deals Listing</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"deals-listing-content\">\n  <ng-container *ngIf=\"listing?.items\">\n    <div class=\"listing-item\" *ngFor=\"let item of listing?.items\" [ngClass]=\"{'ended': ((item.expirationDate | appTimeDifference) < 0), 'imminent-end': ((item.expirationDate | appTimeDifference) > 0 && (item.expirationDate | appTimeDifference) <= 2), 'ends-soon': ((item.expirationDate | appTimeDifference) > 0 && (item.expirationDate | appTimeDifference) > 2 && (item.expirationDate | appTimeDifference) < 10), 'distant-end': ((item.expirationDate | appTimeDifference) >= 10)}\">\n      <ion-row class=\"top-row\">\n        <ion-col class=\"logo-col\" size=\"6\">\n          <app-aspect-ratio [ratio]=\"{w: 128, h: 32}\">\n            <app-image-shell [src]=\"item.logo\" [alt]=\"'deals logo'\" class=\"deal-logo\" animation=\"spinner\"></app-image-shell>\n          </app-aspect-ratio>\n        </ion-col>\n        <ion-col *ngIf=\"((item.expirationDate | appTimeDifference) > 0)\" class=\"call-to-action-col\">\n          <ion-button class=\"claim-button\" expand=\"block\" color=\"claim\" [routerLink]=\"['/app/categories/deals/', item.slug]\">\n            <span class=\"button-cta\">CLAIM</span>\n            <ion-icon slot=\"end\" name=\"arrow-forward\"></ion-icon>\n          </ion-button>\n        </ion-col>\n        <ion-col *ngIf=\"((item.expirationDate | appTimeDifference) < 0)\" class=\"call-to-action-col\">\n          <span class=\"expired-cta\">EXPIRED</span>\n        </ion-col>\n      </ion-row>\n      <ion-row class=\"middle-row\">\n        <ion-col class=\"info-col\">\n          <h4 class=\"item-name\">\n            <a class=\"name-anchor\" [routerLink]=\"['/app/categories/deals/', item.slug]\">\n              <app-text-shell animation=\"bouncing\" [data]=\"item.name\"></app-text-shell>\n            </a>\n          </h4>\n          <p class=\"item-description\">\n            <app-text-shell animation=\"bouncing\" lines=\"3\" [data]=\"item.description\"></app-text-shell>\n          </p>\n        </ion-col>\n        <ion-col size=\"2\">\n          <ion-button class=\"bookmark-button\" expand=\"block\" fill=\"clear\" color=\"claim\">\n            <ion-icon slot=\"icon-only\" name=\"pricetag\"></ion-icon>\n          </ion-button>\n        </ion-col>\n      </ion-row>\n      <ion-row class=\"bottom-row\">\n        <ion-col class=\"code-wrapper\">\n          <span class=\"code-cta\">Use this code:</span>\n          <span class=\"item-code\" [ngClass]=\"{'expired': ((item.expirationDate | appTimeDifference) < 0)}\">\n            <app-text-shell [data]=\"item.code\"></app-text-shell>\n          </span>\n        </ion-col>\n        <ion-col class=\"time-left-wrapper\" size=\"5\" [ngClass]=\"{'countdown-active': ((item.expirationDate | appTimeDifference) > 0 && (item.expirationDate | appTimeDifference) <= 2)}\">\n          <span class=\"expiration-cta\">DEAL {{ ((item.expirationDate | appTimeDifference) < 0) ? 'EXPIRED' : 'EXPIRES IN' }}:</span>\n          <ng-container *ngIf=\"((item.expirationDate | appTimeDifference) < 0 || (item.expirationDate | appTimeDifference) > 2)\">\n            <span class=\"item-time-left\">\n              <app-text-shell [data]=\"(item.expirationDate | appTimeAgo)\"></app-text-shell>\n            </span>\n          </ng-container>\n          <ng-container *ngIf=\"((item.expirationDate | appTimeDifference) > 0 && (item.expirationDate | appTimeDifference) <= 2)\">\n            <ion-row class=\"countdown-wrapper\">\n              <app-countdown-timer class=\"item-countdown\" fill=\"inner-time\" [end]=\"item.expirationDate\" [units]=\"{from: 'hour', to: 'second'}\"></app-countdown-timer>\n            </ion-row>\n          </ng-container>\n        </ion-col>\n      </ion-row>\n    </div>\n  </ng-container>\n</ion-content>\n","import { Injectable } from '@angular/core';\nimport { Resolve } from '@angular/router';\nimport { Observable } from 'rxjs';\n\nimport { DataStore } from '../../shell/data-store';\nimport { DealsService } from '../deals.service';\nimport { DealsListingModel } from './deals-listing.model';\n\n@Injectable()\nexport class DealsListingResolver implements Resolve<DataStore<DealsListingModel>> {\n\n  constructor(private dealsService: DealsService) {}\n\n  resolve(): DataStore<DealsListingModel> {\n    const dataSource: Observable<DealsListingModel> = this.dealsService.getListingDataSource();\n    const dataStore: DataStore<DealsListingModel> = this.dealsService.getListingStore(dataSource);\n\n    return dataStore;\n  }\n}\n"],"names":["CommonModule","RouterModule","IonicModule","ComponentsModule","PipesModule","DealsService","DealsListingPage","DealsListingResolver","routes","path","component","resolve","data","DealsListingPageModule","_","_2","_3","imports","forChild","declarations","i1","ActivatedRoute","ResolverHelper","DealsListingModel","switchMap","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵadvance","ɵɵproperty","ɵɵpureFunction1","_c0","item_r2","slug","ɵɵelementContainerStart","ɵɵelementContainerEnd","ɵɵpipeBind1","expirationDate","ɵɵpureFunction0","_c1","ɵɵtemplate","DealsListingPage_ng_container_7_div_1_ion_col_12_Template","DealsListingPage_ng_container_7_div_1_ion_col_14_Template","DealsListingPage_ng_container_7_div_1_ng_container_39_Template","DealsListingPage_ng_container_7_div_1_ng_container_42_Template","ɵɵpureFunction4","_c2","_c3","logo","name","description","_c4","code","_c5","ɵɵtextInterpolate1","DealsListingPage_ng_container_7_div_1_Template","ctx_r0","listing","items","constructor","route","isShell","ngOnInit","subscriptions","pipe","resolvedRouteData","extractData","subscribe","next","state","error","console","log","ionViewWillLeave","unsubscribe","ɵɵdirectiveInject","selectors","hostVars","hostBindings","DealsListingPage_HostBindings","rf","ctx","DealsListingPage_ng_container_7_Template","dealsService","dataSource","getListingDataSource","dataStore","getListingStore","ɵɵinject","factory","ɵfac"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}