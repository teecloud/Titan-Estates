"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1653],{1653:(M,m,o)=>{o.r(m),o.d(m,{MapsPageModule:()=>l});var n=o(9267),g=o(3893),d=o(6895),c=o(5861);const u=(0,o(7423).fo)("Geolocation",{web:()=>o.e(4561).then(o.bind(o,4561)).then(a=>new a.GeolocationWeb)});var e=o(4650);class s{constructor(t,i){this._elementRef=t,this.platformId=i,this.$mapReady=new e.vpe,this._mapIdledOnce=!1}ngOnInit(){(0,d.NF)(this.platformId)&&this.initMap()}initMap(){this._el=this._elementRef.nativeElement,this._map=new google.maps.Map(this._el,this.mapOptions);const t=this._map.addListener("idle",()=>{console.log("mapReady - IDLE"),this._mapIdledOnce||(this.$mapReady.emit(this._map),this._mapIdledOnce=!0,google.maps.event.removeListener(t))})}}s.\u0275fac=function(t){return new(t||s)(e.Y36(e.SBq),e.Y36(e.Lbi))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-google-map"]],inputs:{mapOptions:"mapOptions"},decls:0,vars:0,template:function(t,i){},encapsulation:2});class p{constructor(t){this.loadingController=t,this.mapOptions={zoom:15,center:{lat:-34.9199842,lng:-56.149849}}}ngAfterViewInit(){this._GoogleMap.$mapReady.subscribe(t=>{this.map=t,console.log("ngAfterViewInit - Google map ready")}),this.createLoader()}createLoader(){var t=this;return(0,c.Z)(function*(){t.loadingElement=yield t.loadingController.create({message:"Trying to get your current location..."})})()}presentLoader(){var t=this;return(0,c.Z)(function*(){yield t.loadingElement.present()})()}dismissLoader(){var t=this;return(0,c.Z)(function*(){t.loadingElement&&(yield t.loadingElement.dismiss())})()}geolocateMe(){this.presentLoader(),u.getCurrentPosition().then(t=>{const i=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);this.map.panTo(i),new google.maps.Marker({position:i,title:"You are here!"}).setMap(this.map)}).catch(t=>{console.log("Error getting current location",t)}).finally(()=>this.dismissLoader())}}p.\u0275fac=function(t){return new(t||p)(e.Y36(n.HT))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-maps"]],viewQuery:function(t,i){if(1&t&&e.Gf(s,5),2&t){let r;e.iGM(r=e.CRH())&&(i._GoogleMap=r.first)}},decls:11,vars:1,consts:[["color","primary"],["slot","start"],["vertical","top","horizontal","end","slot","fixed"],["color","secondary",3,"click"],["name","locate"],[3,"mapOptions"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-menu-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Maps & Geolocation"),e.qZA()()(),e.TgZ(6,"ion-content")(7,"ion-fab",2)(8,"ion-fab-button",3),e.NdJ("click",function(){return i.geolocateMe()}),e._UZ(9,"ion-icon",4),e.qZA()(),e._UZ(10,"app-google-map",5),e.qZA()),2&t&&(e.xp6(10),e.Q6J("mapOptions",i.mapOptions))},dependencies:[n.Sm,n.W2,n.IJ,n.W4,n.Gu,n.gu,n.fG,n.wd,n.sr,s],styles:["app-google-map[_ngcontent-%COMP%]{display:block;width:100%;height:100%}"]});var f=o(3678);class l{}l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[n.Pc,d.ez,f.K,g.Bz.forChild([{path:"",component:p}])]})}}]);