"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5333],{9760:(M,O,a)=>{a.d(O,{K:()=>R,n:()=>x});var d=a(4707),U=a(9646),u=a(9841),t=a(1005),k=a(4004),e=a(8675),b=a(2340);class x{constructor(){this.isShell=!1}}class R{constructor(i){this.shellModel=i,this.networkDelay=b.N.appShellConfig&&b.N.appShellConfig.networkDelay?b.N.appShellConfig.networkDelay:0,this.timeline=new d.t(1)}static AppendShell(i,l,c=400){const g=(0,U.of)(!0).pipe((0,t.g)(c));return(0,u.a)([g,i]).pipe((0,k.U)(([_,P])=>Object.assign(P,{isShell:!1})),(0,e.O)(Object.assign(l,{isShell:!0})))}load(i,l){const c="number"==typeof l?l:this.networkDelay;let g;g=0===c?i:R.AppendShell(i,this.shellModel,c),g.subscribe(_=>{this.timeline.next(_)})}get state(){return this.timeline.asObservable()}}},6048:(M,O,a)=>{a.r(O),a.d(O,{RouteResolversUXModule:()=>m});var d=a(6895),U=a(4006),u=a(3893),t=a(9267),k=a(3678),e=a(4650);const b=function(){return["/showcase/route-resolvers-ux/blocking-resolvers"]},R=function(){return["/showcase/route-resolvers-ux/non-blocking-resolvers"]},i=function(){return["/showcase/route-resolvers-ux/progressive-shell-resolvers"]};class l{constructor(){}}l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-showcase-route-resolvers-ux"]],decls:52,vars:6,consts:[["color","primary"],["slot","start"],[1,"showcase-content"],[1,"showcase-section"],["expand","block",3,"routerLink"]],template:function(o,s){1&o&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-menu-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5," Improve Route Resolvers UX "),e.qZA()()(),e.TgZ(6,"ion-content",2)(7,"section",3)(8,"p"),e._uU(9," Lets see the difference between the different implementations of Route Resolvers. "),e.qZA(),e.TgZ(10,"h5"),e._uU(11,"Blocking Route Resolvers"),e.qZA(),e.TgZ(12,"p"),e._uU(13," By default, Angular Route Resolvers won't transition to the page until the Resolver Observable completes. "),e.qZA(),e.TgZ(14,"p"),e._uU(15," Let's suppose the backend is slow and takes 5 seconds to fetch data and return it to the client, this is what's going to happen. "),e.qZA(),e.TgZ(16,"p")(17,"b"),e._uU(18,"Expected behavior:"),e.qZA(),e._uU(19," Page transition will be delayed 5 seconds until the server sends data back to the client. "),e.qZA(),e.TgZ(20,"ion-button",4),e._uU(21,"Blocking Resolvers"),e.qZA()(),e.TgZ(22,"section",3)(23,"h5"),e._uU(24,"NON-Blocking Route Resolvers"),e.qZA(),e.TgZ(25,"p"),e._uU(26," To avoid waiting for the Observable to complete, we can wrap the base Observable (the one we are getting data from) with a dummy Observable, Subject or Promise that emits the base Observable and immediately completes. "),e.qZA(),e.TgZ(27,"p")(28,"b"),e._uU(29,"Expected behavior:"),e.qZA(),e._uU(30," Page transition will be instant and the transitioned page will show a blank state while the server sends data back to the client. "),e.qZA(),e.TgZ(31,"ion-button",4),e._uU(32,"Non-Blocking Resolvers"),e.qZA()(),e.TgZ(33,"section",3)(34,"h5"),e._uU(35,"Progressive Shell Resolvers"),e.qZA(),e.TgZ(36,"p"),e._uU(37," By using the "),e.TgZ(38,"code"),e._uU(39,"DataStore"),e.qZA(),e._uU(40," utility in conjunction with Angular Route Resolvers, we can solve this UX problem and make page transitions immediate. "),e.qZA(),e.TgZ(41,"p"),e._uU(42," This approach uses a non-blocking Resolver in conjunction with the "),e.TgZ(43,"code"),e._uU(44,"DataStore"),e.qZA(),e._uU(45," utility. "),e.qZA(),e.TgZ(46,"p")(47,"b"),e._uU(48,"Expected behavior:"),e.qZA(),e._uU(49," Page transition will be instant and the transitioned page will show some shell elements while the server sends data back to the client. "),e.qZA(),e.TgZ(50,"ion-button",4),e._uU(51,"Progressive Shell Resolvers"),e.qZA()()()),2&o&&(e.xp6(20),e.Q6J("routerLink",e.DdM(3,b)),e.xp6(11),e.Q6J("routerLink",e.DdM(4,R)),e.xp6(19),e.Q6J("routerLink",e.DdM(5,i)))},dependencies:[t.YG,t.Sm,t.W2,t.Gu,t.fG,t.wd,t.sr,t.YI,u.rH],styles:[".showcase-content[_ngcontent-%COMP%]{--background: var(--app-background-shade)}.showcase-content[_ngcontent-%COMP%]   .showcase-section[_ngcontent-%COMP%]{margin:20px 20px 100px}"]});var c=a(9330);function g(n,o){1&n&&(e.ynx(0),e.TgZ(1,"div",6),e._UZ(2,"ion-spinner"),e.TgZ(3,"p")(4,"b"),e._uU(5,"You can show a static shell while fetching data from the backend"),e.qZA()()(),e.BQk())}const _=function(n){return{"background-image":n}},P=function(){return{w:2,h:1}},B=function(){return{w:1,h:1}};function E(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-row",7)(2,"ion-col",8)(3,"div",9)(4,"app-aspect-ratio",10)(5,"h4",11),e._uU(6,"Heading on top of a cover image"),e.qZA()()()(),e.TgZ(7,"ion-col",12)(8,"app-aspect-ratio",10),e._UZ(9,"img",13),e.qZA()(),e.TgZ(10,"ion-col",14)(11,"h3",15),e._uU(12),e.qZA(),e.TgZ(13,"p"),e._uU(14),e.qZA()()(),e.BQk()),2&n){const s=e.oxw();e.xp6(3),e.Q6J("ngStyle",e.VKq(6,_,"url("+(null==s.routeResolveData?null:s.routeResolveData.cover)+")")),e.xp6(1),e.Q6J("ratio",e.DdM(8,P)),e.xp6(4),e.Q6J("ratio",e.DdM(9,B)),e.xp6(1),e.Q6J("src",null==s.routeResolveData?null:s.routeResolveData.image,e.LSH),e.xp6(3),e.hij(" ",null==s.routeResolveData?null:s.routeResolveData.title," "),e.xp6(2),e.hij(" ",null==s.routeResolveData?null:s.routeResolveData.description," ")}}class f{constructor(o){this.route=o}ngOnInit(){if(console.log("Showcase NON Blocking Resovlers - ngOnInit()"),this.route&&this.route.data){const o=this.route.data;console.log("Showcase NON Blocking Resovlers - Route Resolve Observable => promiseObservable: ",o),o?o.subscribe(s=>{const r=s.data;console.log("Showcase NON Blocking Resovlers - Subscribe to promiseObservable => dataObservable: ",r),r?r.subscribe(y=>{const D=y;console.log("Showcase NON Blocking Resovlers - Subscribe to dataObservable (will emmit just one value) => PageData ("+(D&&D.isShell?"SHELL":"REAL")+"): ",D),D&&(this.routeResolveData=D)}):console.warn("No dataObservable coming from Route Resolver promiseObservable")}):console.warn("No promiseObservable coming from Route Resolver data")}else console.warn("No data coming from Route Resolver")}}f.\u0275fac=function(o){return new(o||f)(e.Y36(u.gz))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-showcase-non-blocking-resolvers"]],decls:12,vars:2,consts:[["color","primary"],["slot","start"],["defaultHref","showcase/route-resolvers-ux"],[1,"showcase-content"],[1,"showcase-section"],[4,"ngIf"],[2,"margin","20px 40px","text-align","center"],[2,"background-color","#FFF","padding","10px"],["size","12"],[2,"background-size","cover","background-repeat","no-repeat",3,"ngStyle"],[3,"ratio"],[2,"margin","10px","text-align","center","color","#FFF"],["size","4"],["alt","Sample Image",2,"width","100%","height","100%",3,"src"],["size","8"],[2,"margin-top","0px"]],template:function(o,s){1&o&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5," NON Blocking Resovler Showcase "),e.qZA()()(),e.TgZ(6,"ion-content",3)(7,"section",4)(8,"p"),e._uU(9," With Non-Blocking Resolvers, page transition is immediate. However UX degrades because you are showing a static loading indicator while the server sends data back to the client. "),e.qZA(),e.YNc(10,g,6,0,"ng-container",5),e.YNc(11,E,15,10,"ng-container",5),e.qZA()()),2&o&&(e.xp6(10),e.Q6J("ngIf",!s.routeResolveData),e.xp6(1),e.Q6J("ngIf",s.routeResolveData))},dependencies:[d.O5,d.PC,t.oU,t.Sm,t.wI,t.W2,t.Gu,t.Nd,t.PQ,t.wd,t.sr,t.cs,c.m],styles:[".showcase-content[_ngcontent-%COMP%]{--background: var(--app-background-shade)}.showcase-content[_ngcontent-%COMP%]   .showcase-section[_ngcontent-%COMP%]{margin:20px 20px 100px}"]});const N=function(n){return{"background-image":n}},L=function(){return{w:2,h:1}},C=function(){return{w:1,h:1}};class w{constructor(o){this.route=o}ngOnInit(){if(console.log("Showcase Blocking Resovlers - ngOnInit()"),this.route&&this.route.data){const o=this.route.data;console.log("Showcase Blocking Resovlers - Route Resolve Observable => dataObservable: ",o),o?o.subscribe(s=>{const r=s.data;console.log("Showcase Blocking Resovlers - Subscribe to dataObservable (will emmit just one value) => PageData ("+(r&&r.isShell?"SHELL":"REAL")+"): ",r),r&&(this.routeResolveData=r)}):console.warn("No dataObservable coming from Route Resolver data")}else console.warn("No data coming from Route Resolver")}}w.\u0275fac=function(o){return new(o||w)(e.Y36(u.gz))},w.\u0275cmp=e.Xpm({type:w,selectors:[["app-showcase-blocking-resolvers"]],decls:27,vars:10,consts:[["color","primary"],["slot","start"],["defaultHref","showcase/route-resolvers-ux"],[1,"showcase-content"],[1,"showcase-section"],[2,"background-color","#FFF","padding","10px"],["size","12"],[2,"background-size","cover","background-repeat","no-repeat",3,"ngStyle"],[3,"ratio"],[2,"margin","10px","text-align","center","color","#FFF"],["size","4"],["alt","Sample Image",2,"width","100%","height","100%",3,"src"],["size","8"],[2,"margin-top","0px"]],template:function(o,s){1&o&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5," Blocking Resovler Showcase "),e.qZA()()(),e.TgZ(6,"ion-content",3)(7,"section",4)(8,"p"),e._uU(9," Notice how the UX degrades when using "),e.TgZ(10,"b"),e._uU(11,"Blocking"),e.qZA(),e._uU(12," Route Resolvers in Angular "),e.qZA(),e.TgZ(13,"ion-row",5)(14,"ion-col",6)(15,"div",7)(16,"app-aspect-ratio",8)(17,"h4",9),e._uU(18,"Heading on top of a cover image"),e.qZA()()()(),e.TgZ(19,"ion-col",10)(20,"app-aspect-ratio",8),e._UZ(21,"img",11),e.qZA()(),e.TgZ(22,"ion-col",12)(23,"h3",13),e._uU(24),e.qZA(),e.TgZ(25,"p"),e._uU(26),e.qZA()()()()()),2&o&&(e.xp6(15),e.Q6J("ngStyle",e.VKq(6,N,"url("+(null==s.routeResolveData?null:s.routeResolveData.cover)+")")),e.xp6(1),e.Q6J("ratio",e.DdM(8,L)),e.xp6(4),e.Q6J("ratio",e.DdM(9,C)),e.xp6(1),e.Q6J("src",null==s.routeResolveData?null:s.routeResolveData.image,e.LSH),e.xp6(3),e.hij(" ",null==s.routeResolveData?null:s.routeResolveData.title," "),e.xp6(2),e.hij(" ",null==s.routeResolveData?null:s.routeResolveData.description," "))},dependencies:[d.PC,t.oU,t.Sm,t.wI,t.W2,t.Gu,t.Nd,t.wd,t.sr,t.cs,c.m],styles:[".showcase-content[_ngcontent-%COMP%]{--background: var(--app-background-shade)}.showcase-content[_ngcontent-%COMP%]   .showcase-section[_ngcontent-%COMP%]{margin:20px 20px 100px}"]});var F=a(3900),I=a(1408),q=a(4840);const Q=function(){return{w:2,h:1}},z=function(){return{w:1,h:1}};class Z{constructor(o){this.route=o}ngOnInit(){console.log("Showcase Progressive Shell Resovlers - ngOnInit()"),this.route.data.pipe((0,F.w)(o=>o.data.state)).subscribe({next:o=>{this.routeResolveData=o},error:o=>console.log(o)})}}Z.\u0275fac=function(o){return new(o||Z)(e.Y36(u.gz))},Z.\u0275cmp=e.Xpm({type:Z,selectors:[["app-showcase-progressive-shell-resolvers"]],decls:22,vars:11,consts:[["color","primary"],["slot","start"],["defaultHref","showcase/route-resolvers-ux"],[1,"showcase-content"],[1,"showcase-section"],[2,"background-color","#FFF","padding","10px"],["size","12"],["animation","spinner",1,"add-overlay",3,"display","src","alt"],[3,"ratio"],[2,"margin","10px","text-align","center","color","#FFF"],["size","4"],["animation","spinner",3,"src","alt"],["size","8"],[2,"margin-top","0px"],[3,"data"],["animation","bouncing","lines","3",3,"data"]],template:function(o,s){1&o&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5," Progressive Shell Showcase "),e.qZA()()(),e.TgZ(6,"ion-content",3)(7,"section",4)(8,"ion-row",5)(9,"ion-col",6)(10,"app-image-shell",7)(11,"app-aspect-ratio",8)(12,"h4",9),e._uU(13,"Heading on top of a cover image"),e.qZA()()()(),e.TgZ(14,"ion-col",10)(15,"app-aspect-ratio",8),e._UZ(16,"app-image-shell",11),e.qZA()(),e.TgZ(17,"ion-col",12)(18,"h3",13),e._UZ(19,"app-text-shell",14),e.qZA(),e.TgZ(20,"p"),e._UZ(21,"app-text-shell",15),e.qZA()()()()()),2&o&&(e.xp6(10),e.Q6J("display","cover")("src",null==s.routeResolveData?null:s.routeResolveData.cover)("alt","Sample Image Cover"),e.xp6(1),e.Q6J("ratio",e.DdM(9,Q)),e.xp6(4),e.Q6J("ratio",e.DdM(10,z)),e.xp6(1),e.Q6J("src",null==s.routeResolveData?null:s.routeResolveData.image)("alt","Sample Image"),e.xp6(3),e.Q6J("data",null==s.routeResolveData?null:s.routeResolveData.title),e.xp6(2),e.Q6J("data",null==s.routeResolveData?null:s.routeResolveData.description))},dependencies:[t.oU,t.Sm,t.wI,t.W2,t.Gu,t.Nd,t.wd,t.sr,t.cs,c.m,I.U,q.$],styles:[".showcase-content[_ngcontent-%COMP%]{--background: var(--app-background-shade)}.showcase-content[_ngcontent-%COMP%]   .showcase-section[_ngcontent-%COMP%]{margin:20px 20px 100px}"]});var T=a(5861),J=a(9770),W=a(8746),S=a(2909);class p{constructor(o,s){this.showcaseService=o,this.loadingController=s}presentLoader(){var o=this;return(0,T.Z)(function*(){o.loadingElement=yield o.loadingController.create({message:"Loading ..."}),yield o.loadingElement.present()})()}dismissLoader(){var o=this;return(0,T.Z)(function*(){o.loadingElement&&(yield o.loadingElement.dismiss())})()}resolve(){const o=this.showcaseService.getDataSourceWithDelay().pipe((0,W.x)(()=>{console.log("dataObservable COMPLETED - HIDE LOADER"),this.dismissLoader()}));return(0,J.P)(()=>(console.log("dataObservable STARTED - SHOW LOADER"),this.presentLoader(),o))}}p.\u0275fac=function(o){return new(o||p)(e.LFG(S.W),e.LFG(t.HT))},p.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac});class v{constructor(o){this.showcaseService=o}resolve(){const o=this.showcaseService.getDataSourceWithDelay();return new Promise((r,y)=>{r(o)})}}v.\u0275fac=function(o){return new(o||v)(e.LFG(S.W))},v.\u0275prov=e.Yz7({token:v,factory:v.\u0275fac});class h{constructor(o){this.showcaseService=o}resolve(){const o=this.showcaseService.getDataSourceWithDelay();return this.showcaseService.getSimpleDataStore(o)}}h.\u0275fac=function(o){return new(o||h)(e.LFG(S.W))},h.\u0275prov=e.Yz7({token:h,factory:h.\u0275fac});const j=[{path:"",component:l},{path:"blocking-resolvers",component:w,resolve:{data:p}},{path:"non-blocking-resolvers",component:f,resolve:{data:v}},{path:"progressive-shell-resolvers",component:Z,resolve:{data:h}}];class m{}m.\u0275fac=function(o){return new(o||m)},m.\u0275mod=e.oAB({type:m}),m.\u0275inj=e.cJS({providers:[p,v,h,S.W],imports:[d.ez,U.u5,t.Pc,u.Bz.forChild(j),k.K]})}}]);