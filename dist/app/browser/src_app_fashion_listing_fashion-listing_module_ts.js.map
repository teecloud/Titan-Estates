{"version":3,"file":"src_app_fashion_listing_fashion-listing_module_ts.js","mappings":"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","sources":["./src/app/fashion/listing/fashion-listing.module.ts","./src/app/fashion/listing/fashion-listing.page.ts","./src/app/fashion/listing/fashion-listing.page.html","./src/app/fashion/listing/fashion-listing.resolver.ts","./src/app/shell/data-store.ts","./src/app/utils/resolver-helper.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\nimport { ComponentsModule } from '../../components/components.module';\n\nimport { FashionService } from '../fashion.service';\nimport { FashionListingPage } from './fashion-listing.page';\nimport { FashionListingResolver } from './fashion-listing.resolver';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FashionListingPage,\n    resolve: {\n      data: FashionListingResolver\n    }\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    ComponentsModule\n  ],\n  declarations: [FashionListingPage],\n  providers: [\n    FashionListingResolver,\n    FashionService\n  ]\n})\nexport class FashionListingPageModule {}\n","import { Component, OnInit, HostBinding } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Subscription } from 'rxjs';\n\nimport { IResolvedRouteData, ResolverHelper } from '../../utils/resolver-helper';\nimport { FashionListingModel } from './fashion-listing.model';\nimport { switchMap } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-fashion-listing',\n  templateUrl: './fashion-listing.page.html',\n  styleUrls: [\n    './styles/fashion-listing.page.scss',\n    './styles/fashion-listing.shell.scss'\n  ]\n})\nexport class FashionListingPage implements OnInit {\n  // Gather all component subscription in one place. Can be one Subscription or multiple (chained using the Subscription.add() method)\n  subscriptions: Subscription;\n\n  listing: FashionListingModel;\n\n  @HostBinding('class.is-shell') get isShell() {\n    return (this.listing && this.listing.isShell) ? true : false;\n  }\n\n  constructor(private route: ActivatedRoute) { }\n\n  ngOnInit(): void {\n    this.subscriptions = this.route.data\n    .pipe(\n      // Extract data for this page\n      switchMap((resolvedRouteData: IResolvedRouteData<FashionListingModel>) => {\n        return ResolverHelper.extractData<FashionListingModel>(resolvedRouteData.data, FashionListingModel);\n      })\n    )\n    .subscribe({\n      next: (state) => {\n        this.listing = state;\n      },\n      error: (error) => console.log(error)\n    });\n  }\n\n  // NOTE: Ionic only calls ngOnDestroy if the page was popped (ex: when navigating back)\n  // Since ngOnDestroy might not fire when you navigate from the current page, use ionViewWillLeave to cleanup Subscriptions\n  ionViewWillLeave(): void {\n    this.subscriptions.unsubscribe();\n  }\n}\n","<ion-header>\n  <ion-toolbar color=\"primary\">\n    <ion-buttons slot=\"start\">\n      <ion-back-button defaultHref=\"app/categories\"></ion-back-button>\n    </ion-buttons>\n    <ion-title>Fashion Listing</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"fashion-listing-content\">\n  <ng-container *ngIf=\"listing?.items\">\n    <ion-row class=\"items-row\">\n      <ion-col size=\"6\" class=\"listing-item\" *ngFor=\"let item of listing?.items\">\n        <div class=\"item-image-wrapper\">\n          <a class=\"image-anchor\" [routerLink]=\"['/app/categories/fashion/', item.slug]\">\n            <app-aspect-ratio [ratio]=\"{w: 3, h: 4}\">\n              <app-image-shell class=\"item-image\" animation=\"spinner\" [src]=\"item.image\" [alt]=\"'product image'\"></app-image-shell>\n            </app-aspect-ratio>\n          </a>\n        </div>\n        <ion-row class=\"item-body\">\n          <ion-col size=\"12\" class=\"main-info\">\n            <h4 class=\"item-name\">\n              <a class=\"name-anchor\" [routerLink]=\"['/app/categories/fashion/', item.slug]\">\n                <app-text-shell animation=\"gradient\" [data]=\"item.name\"></app-text-shell>\n              </a>\n            </h4>\n          </ion-col>\n          <ion-col size=\"12\">\n            <ion-row class=\"secondary-info\">\n              <ion-col class=\"price-col\">\n                <span class=\"item-sale-price\">\n                  <app-text-shell animation=\"gradient\" [data]=\"item.salePrice | currency\"></app-text-shell>\n                </span>\n              </ion-col>\n              <ng-container *ngIf=\"item.price !== '0'\">\n                <ion-col class=\"separator\">\n                </ion-col>\n                <ion-col class=\"price-col\">\n                  <span class=\"item-original-price\">\n                    <app-text-shell animation=\"gradient\" [data]=\"item.price | currency\"></app-text-shell>\n                  </span>\n                </ion-col>\n              </ng-container>\n            </ion-row>\n          </ion-col>\n        </ion-row>\n      </ion-col>\n    </ion-row>\n  </ng-container>\n</ion-content>\n","import { Injectable } from '@angular/core';\nimport { Resolve } from '@angular/router';\nimport { Observable } from 'rxjs';\n\nimport { DataStore } from '../../shell/data-store';\nimport { FashionService } from '../fashion.service';\nimport { FashionListingModel } from './fashion-listing.model';\n\n@Injectable()\nexport class FashionListingResolver implements Resolve<DataStore<FashionListingModel>> {\n\n  constructor(private fashionService: FashionService) {}\n\n  resolve(): DataStore<FashionListingModel> {\n    const dataSource: Observable<FashionListingModel> = this.fashionService.getListingDataSource();\n    const dataStore: DataStore<FashionListingModel> = this.fashionService.getListingStore(dataSource);\n\n    return dataStore;\n  }\n}\n","import { Observable, of, combineLatest, ReplaySubject } from 'rxjs';\nimport { delay, map, startWith } from 'rxjs/operators';\nimport { environment } from '../../environments/environment';\n\nexport class ShellModel {\n  isShell = false;\n}\n\nexport class DataStore<T> {\n  // We wait on purpose 2 secs on local environment when fetching from json to simulate the backend roundtrip.\n  // However, in production you should set this delay to 0 in the environment.prod file.\n  // eslint-disable-next-line max-len\n  private networkDelay = (environment.appShellConfig && environment.appShellConfig.networkDelay) ? environment.appShellConfig.networkDelay : 0;\n\n  private timeline: ReplaySubject<T & ShellModel> = new ReplaySubject(1);\n\n  constructor(private shellModel: T) { }\n\n  // Static function with generics\n  // (ref: https://stackoverflow.com/a/24293088/1116959)\n  // Append a shell (T & ShellModel) to every value (T) emmited to the timeline\n  public static AppendShell<T>(dataObservable: Observable<T>, shellModel: T, networkDelay = 400): Observable<T & ShellModel> {\n    const delayObservable = of(true).pipe(\n      delay(networkDelay)\n    );\n\n    // Assign shell flag accordingly\n    // (ref: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\n    return combineLatest([\n      delayObservable,\n      dataObservable\n    ]).pipe(\n      // Dismiss unnecessary delayValue\n      map(([delayValue, dataValue]: [boolean, T]): (T & ShellModel) => Object.assign(dataValue, {isShell: false})),\n      // Set the shell model as the initial value\n      startWith(Object.assign(shellModel, {isShell: true}))\n    );\n  }\n\n  load(dataSourceObservable: Observable<T>, networkDelay?: number): void {\n    // eslint-disable-next-line no-shadow, @typescript-eslint/no-shadow\n    const delay = (typeof networkDelay === 'number') ? networkDelay : this.networkDelay;\n\n    let processedDataSource: Observable<any>;\n\n    // If no network delay, then don't show shell\n    if (delay === 0) {\n      processedDataSource = dataSourceObservable;\n    } else {\n      processedDataSource = DataStore.AppendShell(dataSourceObservable, this.shellModel, delay);\n    }\n\n    processedDataSource\n    .subscribe((dataValue: T & ShellModel) => {\n      this.timeline.next(dataValue);\n    });\n  }\n\n  public get state(): Observable<T & ShellModel> {\n    return this.timeline.asObservable();\n  }\n}\n","import { DataStore } from '../shell/data-store';\nimport { Observable, of } from 'rxjs';\n\nexport interface IResolvedRouteData<T> {\n  data: T | DataStore<T>;\n}\n\nexport class ResolverHelper<T> {\n  // More info on function overloads here: https://www.typescriptlang.org/docs/handbook/functions.html#overloads\n  public static extractData<T>(source: (T | DataStore<T>), constructor: (new(...args: any[]) => T)): Observable<T> {\n    if (source instanceof DataStore) {\n      return source.state;\n    } else if (source instanceof constructor) {\n      // The right side of instanceof should be an expression evaluating to a constructor function (ie. a class), not a type\n      // That's why we included an extra parameter which acts as a constructor function for type T\n      // (see: https://github.com/microsoft/TypeScript/issues/5236)\n      return of(source);\n    }\n  }\n}\n"],"names":["CommonModule","RouterModule","IonicModule","ComponentsModule","FashionService","FashionListingPage","FashionListingResolver","routes","path","component","resolve","data","FashionListingPageModule","_","_2","_3","imports","forChild","declarations","i1","ActivatedRoute","ResolverHelper","FashionListingModel","switchMap","i0","ɵɵelementContainerStart","ɵɵelement","ɵɵelementStart","ɵɵelementEnd","ɵɵelementContainerEnd","ɵɵadvance","ɵɵproperty","ɵɵpipeBind1","item_r2","price","ɵɵtemplate","FashionListingPage_ng_container_7_ion_col_2_ng_container_16_Template","ɵɵpureFunction1","_c0","slug","ɵɵpureFunction0","_c1","image","name","salePrice","FashionListingPage_ng_container_7_ion_col_2_Template","ctx_r0","listing","items","constructor","route","isShell","ngOnInit","subscriptions","pipe","resolvedRouteData","extractData","subscribe","next","state","error","console","log","ionViewWillLeave","unsubscribe","ɵɵdirectiveInject","selectors","hostVars","hostBindings","FashionListingPage_HostBindings","rf","ctx","ɵɵtext","FashionListingPage_ng_container_7_Template","fashionService","dataSource","getListingDataSource","dataStore","getListingStore","ɵɵinject","factory","ɵfac","of","combineLatest","ReplaySubject","delay","map","startWith","environment","ShellModel","DataStore","shellModel","networkDelay","appShellConfig","timeline","AppendShell","dataObservable","delayObservable","delayValue","dataValue","Object","assign","load","dataSourceObservable","processedDataSource","asObservable","source"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}