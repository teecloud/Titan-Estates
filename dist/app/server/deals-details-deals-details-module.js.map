{"version":3,"sources":["./src/app/deals/details/deals-details.page.ts","./src/app/deals/details/deals-details.page.html","./src/app/deals/details/deals-details.resolver.ts","./src/app/deals/details/deals-details.module.ts"],"names":[],"mappings":"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","file":"deals-details-deals-details-module.js","sourcesContent":["import { Component, OnInit, HostBinding } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Subscription } from 'rxjs';\n\nimport { IResolvedRouteData, ResolverHelper } from '../../utils/resolver-helper';\nimport { DealsDetailsModel } from './deals-details.model';\nimport { switchMap } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-deals-details',\n  templateUrl: './deals-details.page.html',\n  styleUrls: [\n    './styles/deals-details.page.scss',\n    './styles/deals-details.shell.scss'\n  ]\n})\nexport class DealsDetailsPage implements OnInit {\n  // Gather all component subscription in one place. Can be one Subscription or multiple (chained using the Subscription.add() method)\n  subscriptions: Subscription;\n\n  details: DealsDetailsModel;\n  slidesOptions: any = {\n    zoom: {\n      toggle: false // Disable zooming to prevent weird double tap zomming on slide images\n    }\n  };\n\n  @HostBinding('class.is-shell') get isShell() {\n    return (this.details && this.details.isShell) ? true : false;\n  }\n\n  constructor(private route: ActivatedRoute) { }\n\n  ngOnInit(): void {\n    this.subscriptions = this.route.data\n    .pipe(\n      // Extract data for this page\n      switchMap((resolvedRouteData: IResolvedRouteData<DealsDetailsModel>) => {\n        return ResolverHelper.extractData<DealsDetailsModel>(resolvedRouteData.data, DealsDetailsModel);\n      })\n    )\n    .subscribe((state) => {\n      this.details = state;\n    }, (error) => console.log(error));\n  }\n\n  // NOTE: Ionic only calls ngOnDestroy if the page was popped (ex: when navigating back)\n  // Since ngOnDestroy might not fire when you navigate from the current page, use ionViewWillLeave to cleanup Subscriptions\n  ionViewWillLeave(): void {\n    this.subscriptions.unsubscribe();\n  }\n}\n","<ion-header>\n  <ion-toolbar color=\"primary\">\n    <ion-buttons slot=\"start\">\n      <ion-back-button defaultHref=\"app/categories/deals\"></ion-back-button>\n    </ion-buttons>\n    <ion-title>Deals Details</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"deals-details-content\" [ngClass]=\"{'ended': ((details?.expirationDate | appTimeDifference) < 0), 'imminent-end': ((details?.expirationDate | appTimeDifference) > 0 && (details?.expirationDate | appTimeDifference) <= 2), 'ends-soon': ((details?.expirationDate | appTimeDifference) > 0 && (details?.expirationDate | appTimeDifference) > 2 && (details?.expirationDate | appTimeDifference) < 10), 'distant-end': ((details?.expirationDate | appTimeDifference) >= 10)}\">\n  <ion-row class=\"expiration-countdown\" *ngIf=\"((details?.expirationDate | appTimeDifference) > 0 && (details?.expirationDate | appTimeDifference) <= 2)\">\n    <span class=\"expiration-lead\">Deal expires in:</span>\n    <app-countdown-timer class=\"item-countdown\" fill=\"countdown\" [end]=\"details?.expirationDate\" [units]=\"{from: 'hour', to: 'second'}\"></app-countdown-timer>\n  </ion-row>\n\n  <div class=\"details-wrapper\">\n    <ion-row class=\"slider-row\">\n      <ion-slides class=\"details-slides\" pager=\"true\" [options]=\"slidesOptions\">\n        <ion-slide class=\"\" *ngFor=\"let image of details?.showcaseImages\">\n          <ion-row class=\"slide-inner-row\">\n            <app-aspect-ratio [ratio]=\"{w: 56, h: 40}\">\n              <app-image-shell [src]=\"image\" [alt]=\"'deals details'\" class=\"showcase-image\" animation=\"spinner\"></app-image-shell>\n            </app-aspect-ratio>\n          </ion-row>\n        </ion-slide>\n      </ion-slides>\n    </ion-row>\n    <ion-row class=\"description-row\">\n      <ion-col class=\"logo-col\" size=\"6\">\n        <app-aspect-ratio [ratio]=\"{w: 128, h: 32}\">\n          <app-image-shell [src]=\"details?.logo\" [alt]=\"'deals details'\" class=\"logo-image\" animation=\"spinner\"></app-image-shell>\n        </app-aspect-ratio>\n      </ion-col>\n      <ion-col class=\"info-col\" size=\"9\">\n        <h4 class=\"details-name\">\n          <app-text-shell animation=\"bouncing\" [data]=\"details?.name\"></app-text-shell>\n        </h4>\n        <p class=\"details-description\">\n          <app-text-shell animation=\"bouncing\" lines=\"3\" [data]=\"details?.description\"></app-text-shell>\n        </p>\n      </ion-col>\n      <ion-col class=\"preview-image-col\" size=\"3\">\n        <app-aspect-ratio [ratio]=\"{w: 1, h: 1}\">\n          <app-image-shell [src]=\"details?.previewImage\" [alt]=\"'deals details'\" class=\"preview-image\" animation=\"spinner\"></app-image-shell>\n        </app-aspect-ratio>\n      </ion-col>\n    </ion-row>\n    <ion-row class=\"promo-row\">\n      <h3 class=\"promo-title\">Copy the Code</h3>\n      <ion-col size=\"8\">\n        <p class=\"promo-description\">\n          Paste this code at checkout to get an extra 50% off\n        </p>\n      </ion-col>\n      <ion-col size=\"6\">\n        <ion-button class=\"promo-code-btn\" expand=\"block\" shape=\"round\" fill=\"outline\" color=\"claim\">\n          <span class=\"promo-code\">\n            <app-text-shell [data]=\"details?.code\"></app-text-shell>\n          </span>\n        </ion-button>\n      </ion-col>\n      <ion-col size=\"8\">\n        <p class=\"promo-instructions\">\n          Go to <a class=\"instructions-anchor\" target=\"_blank\" href=\"https://google.com/search?q=chocolate\">lancasternutcandy.com</a> and paste the code at checkout.\n        </p>\n      </ion-col>\n    </ion-row>\n    <div class=\"expiration-notice\">\n      <span class=\"notice-message\">Cupon {{ ((details?.expirationDate | appTimeDifference) < 0) ? 'expired' : 'expires' }} on:</span>\n      <span class=\"expiration-value\">\n        <app-text-shell [data]=\"details?.expirationDate | date:'mediumDate'\"></app-text-shell>\n      </span>\n    </div>\n  </div>\n\n  <div class=\"related-deals-wrapper\" *ngIf=\"details?.relatedDeals && details.relatedDeals.length > 0\">\n    <h3 class=\"related-deals-title\">More hot deals</h3>\n    <ion-row class=\"related-deal\" *ngFor=\"let deal of details?.relatedDeals\">\n      <ion-col class=\"deal-logo-wrapper\" size=\"4\">\n        <app-aspect-ratio [ratio]=\"{w: 1, h: 1}\">\n          <app-image-shell [src]=\"deal.logo\" [alt]=\"'deals logo'\" class=\"related-deal-logo\" animation=\"spinner\"></app-image-shell>\n        </app-aspect-ratio>\n      </ion-col>\n      <ion-col class=\"deal-info-wrapper\" size=\"8\">\n        <h4 class=\"related-deal-title\">\n          <app-text-shell [data]=\"deal?.name\"></app-text-shell>\n        </h4>\n        <p class=\"related-deal-description\">\n          <app-text-shell [data]=\"deal?.description\"></app-text-shell>\n        </p>\n      </ion-col>\n    </ion-row>\n  </div>\n</ion-content>\n","import { Injectable } from '@angular/core';\nimport { Resolve } from '@angular/router';\nimport { Observable } from 'rxjs';\n\nimport { DataStore } from '../../shell/data-store';\nimport { DealsService } from '../deals.service';\nimport { DealsDetailsModel } from './deals-details.model';\n\n@Injectable()\nexport class DealsDetailsResolver implements Resolve<DataStore<DealsDetailsModel>> {\n\n  constructor(private dealsService: DealsService) {}\n\n  resolve(): DataStore<DealsDetailsModel> {\n    const dataSource: Observable<DealsDetailsModel> = this.dealsService.getDetailsDataSource();\n    const dataStore: DataStore<DealsDetailsModel> = this.dealsService.getDetailsStore(dataSource);\n\n    return dataStore;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ComponentsModule } from '../../components/components.module';\nimport { PipesModule } from '../../pipes/pipes.module';\n\nimport { DealsService } from '../deals.service';\nimport { DealsDetailsPage } from './deals-details.page';\nimport { DealsDetailsResolver } from './deals-details.resolver';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DealsDetailsPage,\n    resolve: {\n      data: DealsDetailsResolver\n    }\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    ComponentsModule,\n    PipesModule\n  ],\n  declarations: [\n    DealsDetailsPage\n  ],\n  providers: [\n    DealsDetailsResolver,\n    DealsService\n  ]\n})\nexport class DealsDetailsPageModule {}\n"],"sourceRoot":"webpack:///"}